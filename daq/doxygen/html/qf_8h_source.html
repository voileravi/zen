<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>QP/C: qf.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">QP/C
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">qf.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qf_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Product:  QF/C platform-independent public interface</span>
<a name="l00003"></a>00003 <span class="comment">* Last Updated for Version: 4.4.00</span>
<a name="l00004"></a>00004 <span class="comment">* Date of the Last Update:  Jan 17, 2012</span>
<a name="l00005"></a>00005 <span class="comment">*</span>
<a name="l00006"></a>00006 <span class="comment">*                    Q u a n t u m     L e a P s</span>
<a name="l00007"></a>00007 <span class="comment">*                    ---------------------------</span>
<a name="l00008"></a>00008 <span class="comment">*                    innovating embedded systems</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* Copyright (C) 2002-2012 Quantum Leaps, LLC. All rights reserved.</span>
<a name="l00011"></a>00011 <span class="comment">*</span>
<a name="l00012"></a>00012 <span class="comment">* This software may be distributed and modified under the terms of the GNU</span>
<a name="l00013"></a>00013 <span class="comment">* General Public License version 2 (GPL) as published by the Free Software</span>
<a name="l00014"></a>00014 <span class="comment">* Foundation and appearing in the file GPL.TXT included in the packaging of</span>
<a name="l00015"></a>00015 <span class="comment">* this file. Please note that GPL Section 2[b] requires that all works based</span>
<a name="l00016"></a>00016 <span class="comment">* on this software must also be made publicly available under the terms of</span>
<a name="l00017"></a>00017 <span class="comment">* the GPL (&quot;Copyleft&quot;).</span>
<a name="l00018"></a>00018 <span class="comment">*</span>
<a name="l00019"></a>00019 <span class="comment">* Alternatively, this software may be distributed and modified under the</span>
<a name="l00020"></a>00020 <span class="comment">* terms of Quantum Leaps commercial licenses, which expressly supersede</span>
<a name="l00021"></a>00021 <span class="comment">* the GPL and are specifically designed for licensees interested in</span>
<a name="l00022"></a>00022 <span class="comment">* retaining the proprietary status of their code.</span>
<a name="l00023"></a>00023 <span class="comment">*</span>
<a name="l00024"></a>00024 <span class="comment">* Contact information:</span>
<a name="l00025"></a>00025 <span class="comment">* Quantum Leaps Web site:  http://www.quantum-leaps.com</span>
<a name="l00026"></a>00026 <span class="comment">* e-mail:                  info@quantum-leaps.com</span>
<a name="l00027"></a>00027 <span class="comment">*****************************************************************************/</span>
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef qf_h</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define qf_h</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="comment">/****************************************************************************/</span>
<a name="l00041"></a>00041 <span class="preprocessor">#if (QF_MAX_ACTIVE &lt; 1) || (63 &lt; QF_MAX_ACTIVE)</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">    #error &quot;QF_MAX_ACTIVE not defined or out of range. Valid range is 1..63&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 <span class="comment">/****************************************************************************/</span>
<a name="l00046"></a>00046 <span class="preprocessor">#ifndef QF_EVENT_SIZ_SIZE</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00049"></a><a class="code" href="qf_8h.html#a1272d49c23ca5852a7a8e9603ba32d31">00049</a> <span class="preprocessor">    #define QF_EVENT_SIZ_SIZE 2</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#if (QF_EVENT_SIZ_SIZE == 1)</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00058"></a>00058     <span class="keyword">typedef</span> uint8_t QEventSize;
<a name="l00059"></a>00059 <span class="preprocessor">#elif (QF_EVENT_SIZ_SIZE == 2)</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>    <span class="keyword">typedef</span> uint16_t QEventSize;
<a name="l00061"></a>00061 <span class="preprocessor">#elif (QF_EVENT_SIZ_SIZE == 4)</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>    <span class="keyword">typedef</span> uint32_t QEventSize;
<a name="l00063"></a>00063 <span class="preprocessor">#else</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span><span class="preprocessor">    #error &quot;QF_EVENT_SIZ_SIZE defined incorrectly, expected 1, 2, or 4&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="comment">/****************************************************************************/</span>
<a name="l00068"></a>00068 <span class="preprocessor">#ifndef QF_MAX_EPOOL</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00071"></a><a class="code" href="qf_8h.html#ae2e7347d1d59f5a0410bbf92e9f141f3">00071</a> <span class="preprocessor">    #define QF_MAX_EPOOL 3</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a>00074 <span class="comment">/****************************************************************************/</span>
<a name="l00075"></a>00075 <span class="preprocessor">#ifndef QF_ACTIVE_SUPER_</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>
<a name="l00094"></a>00094 <span class="preprocessor">    #define QF_ACTIVE_SUPER_               QHsm</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span>
<a name="l00099"></a>00099 <span class="preprocessor">    #define QF_ACTIVE_CTOR_(me_, initial_) QHsm_ctor((me_), (initial_))</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span>
<a name="l00104"></a>00104 <span class="preprocessor">    #define QF_ACTIVE_INIT_(me_, e_)       QHsm_init((me_), (e_))</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span>
<a name="l00109"></a>00109 <span class="preprocessor">    #define QF_ACTIVE_DISPATCH_(me_, e_)   QHsm_dispatch((me_), (e_))</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span>
<a name="l00113"></a>00113 <span class="preprocessor">    #define QF_ACTIVE_STATE_               QStateHandler</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>
<a name="l00115"></a>00115 <span class="preprocessor">#endif</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span>
<a name="l00117"></a>00117 <span class="keyword">struct </span>QEQueueTag;                                   <span class="comment">/* forward declaration */</span>
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="comment">/****************************************************************************/</span>
<a name="l00140"></a><a class="code" href="struct_q_active.html">00140</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>QActiveTag {
<a name="l00144"></a><a class="code" href="struct_q_active.html#a53ea9d7ea823ef2f6c18d703e31a588b">00144</a>     QF_ACTIVE_SUPER_ <a class="code" href="struct_q_active.html#a53ea9d7ea823ef2f6c18d703e31a588b">super</a>;
<a name="l00145"></a>00145 
<a name="l00156"></a><a class="code" href="struct_q_active.html#a8068dbe935e6127072dbc05a5818edae">00156</a>     <a class="code" href="qk_8h.html#aee19c1d6e860d59dda6e539852b99dbe" title="This macro defines the type of the event queue used for the active objects.">QF_EQUEUE_TYPE</a> <a class="code" href="struct_q_active.html#a8068dbe935e6127072dbc05a5818edae" title="OS-dependent event-queue type.">eQueue</a>;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 <span class="preprocessor">#ifdef QF_OS_OBJECT_TYPE</span>
<a name="l00159"></a>00159 <span class="preprocessor"></span>
<a name="l00166"></a>00166     QF_OS_OBJECT_TYPE osObject;
<a name="l00167"></a>00167 <span class="preprocessor">#endif</span>
<a name="l00168"></a>00168 <span class="preprocessor"></span>
<a name="l00169"></a>00169 <span class="preprocessor">#ifdef QF_THREAD_TYPE</span>
<a name="l00170"></a>00170 <span class="preprocessor"></span>
<a name="l00176"></a>00176     QF_THREAD_TYPE thread;
<a name="l00177"></a>00177 <span class="preprocessor">#endif</span>
<a name="l00178"></a>00178 <span class="preprocessor"></span>
<a name="l00182"></a><a class="code" href="struct_q_active.html#a083eed8e8b538231e2bbeef6af38203f">00182</a>     uint8_t <a class="code" href="struct_q_active.html#a083eed8e8b538231e2bbeef6af38203f" title="QF priority associated with the active object.">prio</a>;
<a name="l00183"></a>00183 
<a name="l00193"></a><a class="code" href="struct_q_active.html#affac08b4eb09d12108fb678057ed0586">00193</a>     uint8_t <a class="code" href="struct_q_active.html#affac08b4eb09d12108fb678057ed0586" title="The Boolean loop variable determining if the thread routine of the active object is running...">running</a>;
<a name="l00194"></a>00194 } <a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a>;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">/* public functions */</span>
<a name="l00224"></a>00224 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a0123f02b4c1bcf7df2cc0b11dfce8b09" title="Starts execution of an active object and registers the object with the framework.">QActive_start</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, uint8_t prio,
<a name="l00225"></a>00225                    <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *qSto[], uint32_t qLen,
<a name="l00226"></a>00226                    <span class="keywordtype">void</span> *stkSto, uint32_t stkSize,
<a name="l00227"></a>00227                    <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *ie);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="preprocessor">#ifdef Q_SPY</span>
<a name="l00230"></a>00230 <span class="preprocessor"></span>
<a name="l00251"></a>00251     <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a39bfd1c186beaf9c9000f14bcc258e5b" title="Posts an event e directly to the event queue of the acitve object me using the First-In-First-Out (FI...">QActive_postFIFO</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e,
<a name="l00252"></a>00252                           <span class="keywordtype">void</span> <span class="keyword">const</span> *sender);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 
<a name="l00275"></a><a class="code" href="qf_8h.html#ab7c56990d949c8708e3fe2b737f2e65c">00275</a> <span class="preprocessor">    #define QACTIVE_POST(me_, e_, sender_) \</span>
<a name="l00276"></a>00276 <span class="preprocessor">        QActive_postFIFO((me_), (e_), (sender_))</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span>
<a name="l00278"></a>00278 <span class="preprocessor">#else</span>
<a name="l00279"></a>00279 <span class="preprocessor"></span>
<a name="l00280"></a>00280     <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a39bfd1c186beaf9c9000f14bcc258e5b" title="Posts an event e directly to the event queue of the acitve object me using the First-In-First-Out (FI...">QActive_postFIFO</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00281"></a>00281 <span class="preprocessor">    #define QACTIVE_POST(me_, e_, dummy_) QActive_postFIFO((me_), (e_))</span>
<a name="l00282"></a>00282 <span class="preprocessor"></span>
<a name="l00283"></a>00283 <span class="preprocessor">#endif</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span>
<a name="l00293"></a>00293 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a27984f6494cd1698adce6f8b957ad6c3" title="Posts an event directly to the event queue of the active object me using the Last-In-First-Out (LIFO)...">QActive_postLIFO</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 <span class="comment">/* protected functions ...*/</span>
<a name="l00296"></a>00296 
<a name="l00313"></a><a class="code" href="qf_8h.html#a7ddf2dd243b2bc13589a9c7d22f0e253">00313</a> <span class="preprocessor">#define QActive_ctor(me_, initial_) QF_ACTIVE_CTOR_(&amp;(me_)-&gt;super, (initial_))</span>
<a name="l00314"></a>00314 <span class="preprocessor"></span>
<a name="l00328"></a>00328 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a361b6756ee8cbca0005e4c3afc4ada5b" title="Stops execution of an active object and removes it from the framework&#39;s supervision.">QActive_stop</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me);
<a name="l00329"></a>00329 
<a name="l00344"></a>00344 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a2cb9015d643ddbf487112dfefb02eef3" title="Subscribes for delivery of signal sig to the active object me.">QActive_subscribe</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> <span class="keyword">const</span> *me, <a class="code" href="qevent_8h.html#af55248e13cdc5784f0824c7615c41b7d" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l00345"></a>00345 
<a name="l00365"></a>00365 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#ab050587cf7c9786819184e423827e0ff" title="Un-subscribes from the delivery of signal sig to the active object me.">QActive_unsubscribe</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> <span class="keyword">const</span> *me, <a class="code" href="qevent_8h.html#af55248e13cdc5784f0824c7615c41b7d" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l00366"></a>00366 
<a name="l00386"></a>00386 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a538f489d1d1be6f6493dbff54ff87337" title="Un-subscribes from the delivery of all signals to the active object me.">QActive_unsubscribeAll</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> <span class="keyword">const</span> *me);
<a name="l00387"></a>00387 
<a name="l00388"></a>00388 
<a name="l00403"></a>00403 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a58236a7032392f585a03122c134fec1b" title="Defer an event to a given separate event queue.">QActive_defer</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <a class="code" href="struct_q_e_queue.html" title="Native QF Event Queue.">QEQueue</a> *eq, <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00404"></a>00404 
<a name="l00421"></a>00421 uint8_t <a class="code" href="qf_8h.html#a352e707faee76e5cfd6c170a47c24fc3" title="Recall a deferred event from a given event queue.">QActive_recall</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me, <a class="code" href="struct_q_e_queue.html" title="Native QF Event Queue.">QEQueue</a> *eq);
<a name="l00422"></a>00422 
<a name="l00433"></a>00433 <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *<a class="code" href="qf_8h.html#a7f7c861d8e3e884d52cfe661056e8242" title="Get an event from the event queue of an active object.">QActive_get_</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *me);
<a name="l00434"></a>00434 <span class="comment">/* friend class QF; */</span>
<a name="l00435"></a>00435 <span class="comment">/* friend class QTimeEvt; */</span>
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="comment">/****************************************************************************/</span>
<a name="l00438"></a>00438 <span class="preprocessor">#ifndef QF_TIMEEVT_CTR_SIZE</span>
<a name="l00439"></a>00439 <span class="preprocessor"></span>
<a name="l00442"></a><a class="code" href="qf_8h.html#a80d059a0d02a2573c76f4eb5df0228ae">00442</a> <span class="preprocessor">    #define QF_TIMEEVT_CTR_SIZE 2</span>
<a name="l00443"></a>00443 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00444"></a>00444 <span class="preprocessor"></span><span class="preprocessor">#if (QF_TIMEEVT_CTR_SIZE == 1)</span>
<a name="l00445"></a>00445 <span class="preprocessor"></span>
<a name="l00455"></a>00455     <span class="keyword">typedef</span> uint8_t QTimeEvtCtr;
<a name="l00456"></a>00456 <span class="preprocessor">#elif (QF_TIMEEVT_CTR_SIZE == 2)</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span>    <span class="keyword">typedef</span> uint16_t QTimeEvtCtr;
<a name="l00458"></a>00458 <span class="preprocessor">#elif (QF_TIMEEVT_CTR_SIZE == 4)</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span>    <span class="keyword">typedef</span> uint32_t QTimeEvtCtr;
<a name="l00460"></a>00460 <span class="preprocessor">#else</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span><span class="preprocessor">    #error &quot;QF_TIMEEVT_CTR_SIZE defined incorrectly, expected 1, 2, or 4&quot;</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span>
<a name="l00497"></a><a class="code" href="struct_q_time_evt.html">00497</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>QTimeEvtTag {
<a name="l00501"></a><a class="code" href="struct_q_time_evt.html#a6252a918ac5d215ff3cc1314cec4e929">00501</a>     <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <a class="code" href="struct_q_time_evt.html#a6252a918ac5d215ff3cc1314cec4e929">super</a>;
<a name="l00502"></a>00502 
<a name="l00505"></a><a class="code" href="struct_q_time_evt.html#ac1a3cdc60a29118b76cf778148c6d7b3">00505</a>     <span class="keyword">struct </span>QTimeEvtTag *<a class="code" href="struct_q_time_evt.html#ac1a3cdc60a29118b76cf778148c6d7b3">prev</a>;
<a name="l00506"></a>00506 
<a name="l00509"></a><a class="code" href="struct_q_time_evt.html#ad2934edc311dd168e04abd32fa10c586">00509</a>     <span class="keyword">struct </span>QTimeEvtTag *<a class="code" href="struct_q_time_evt.html#ad2934edc311dd168e04abd32fa10c586">next</a>;
<a name="l00510"></a>00510 
<a name="l00513"></a><a class="code" href="struct_q_time_evt.html#a44a34a5e8ddf851ff630bd614f9899d3">00513</a>     <a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *<a class="code" href="struct_q_time_evt.html#a44a34a5e8ddf851ff630bd614f9899d3">act</a>;
<a name="l00514"></a>00514 
<a name="l00519"></a><a class="code" href="struct_q_time_evt.html#a6718a7906d311adc6524d12fa488e14f">00519</a>     QTimeEvtCtr <a class="code" href="struct_q_time_evt.html#a6718a7906d311adc6524d12fa488e14f">ctr</a>;
<a name="l00520"></a>00520 
<a name="l00526"></a><a class="code" href="struct_q_time_evt.html#a3b7a26170815aec3dac1166aefb4abdd">00526</a>     QTimeEvtCtr <a class="code" href="struct_q_time_evt.html#a3b7a26170815aec3dac1166aefb4abdd">interval</a>;
<a name="l00527"></a>00527 } <a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a>;
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 <span class="comment">/* public functions */</span>
<a name="l00530"></a>00530 
<a name="l00544"></a>00544 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#aa70d5d11e10b2cbcc7d7de361ab9037d" title="The &quot;constructor&quot; to initialize a Time Event.">QTimeEvt_ctor</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> *me, <a class="code" href="qevent_8h.html#af55248e13cdc5784f0824c7615c41b7d" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l00545"></a>00545 
<a name="l00564"></a><a class="code" href="qf_8h.html#a7091744cf5947a517782c530fceebc0c">00564</a> <span class="preprocessor">#define QTimeEvt_postIn(me_, act_, nTicks_) do { \</span>
<a name="l00565"></a>00565 <span class="preprocessor">    (me_)-&gt;interval = (QTimeEvtCtr)0; \</span>
<a name="l00566"></a>00566 <span class="preprocessor">    QTimeEvt_arm_((me_), (act_), (nTicks_)); \</span>
<a name="l00567"></a>00567 <span class="preprocessor">} while (0)</span>
<a name="l00568"></a>00568 <span class="preprocessor"></span>
<a name="l00590"></a><a class="code" href="qf_8h.html#ac551ecf84032c1c6799734671be01894">00590</a> <span class="preprocessor">#define QTimeEvt_postEvery(me_, act_, nTicks_) do { \</span>
<a name="l00591"></a>00591 <span class="preprocessor">    (me_)-&gt;interval = (nTicks_); \</span>
<a name="l00592"></a>00592 <span class="preprocessor">    QTimeEvt_arm_((me_), (act_), (nTicks_)); \</span>
<a name="l00593"></a>00593 <span class="preprocessor">} while (0)</span>
<a name="l00594"></a>00594 <span class="preprocessor"></span>
<a name="l00606"></a>00606 uint8_t <a class="code" href="qf_8h.html#a30bbb5b62b4271afc94725b651b326d6" title="Disarm a time event.">QTimeEvt_disarm</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> *me);
<a name="l00607"></a>00607 
<a name="l00625"></a>00625 uint8_t <a class="code" href="qf_8h.html#a41a513d4b6b5333b6eddad0737dd30df" title="Rearm a time event.">QTimeEvt_rearm</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> *me, QTimeEvtCtr nTicks);
<a name="l00626"></a>00626 
<a name="l00635"></a>00635 QTimeEvtCtr <a class="code" href="qf_8h.html#a974e633dccc976194e2df8d46e972779" title="Get the current value of the down-counter of a time event.">QTimeEvt_ctr</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> <span class="keyword">const</span> *me);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637 <span class="comment">/* private functions */</span>
<a name="l00638"></a>00638 
<a name="l00644"></a>00644 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#ac5e2b55e92a199f6674b0ce0a7acf66e" title="Arm a time event (internal function to be used through macros only).">QTimeEvt_arm_</a>(<a class="code" href="struct_q_time_evt.html" title="Time Event structure.">QTimeEvt</a> *me, <a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *act, QTimeEvtCtr nTicks);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646 <span class="comment">/* friend class QF; */</span>
<a name="l00647"></a>00647 
<a name="l00648"></a>00648 <span class="comment">/*****************************************************************************</span>
<a name="l00649"></a>00649 <span class="comment">* QF facilities</span>
<a name="l00650"></a>00650 <span class="comment">*/</span>
<a name="l00651"></a>00651 
<a name="l00660"></a><a class="code" href="struct_q_subscr_list.html">00660</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>QSubscrListTag {
<a name="l00661"></a>00661 
<a name="l00671"></a><a class="code" href="struct_q_subscr_list.html#ab297ded6e861d613a1494faf9f3bb887">00671</a>     uint8_t bits[((<a class="code" href="qf__port_8h.html#a776d2a032974db4bf9bcfde01ace1389" title="The maximum number of active objects in the application.">QF_MAX_ACTIVE</a> - 1) / 8) + 1];
<a name="l00672"></a>00672 } <a class="code" href="struct_q_subscr_list.html" title="Subscriber-List structure.">QSubscrList</a>;
<a name="l00673"></a>00673 
<a name="l00674"></a>00674 <span class="comment">/* public functions */</span>
<a name="l00675"></a>00675 
<a name="l00681"></a>00681 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#adac7eccb860d910c4e446d3143798bba" title="QF initialization.">QF_init</a>(<span class="keywordtype">void</span>);
<a name="l00682"></a>00682 
<a name="l00707"></a>00707 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a9f97f476eb311982be2f2e46011a04e4" title="Publish-subscribe initialization.">QF_psInit</a>(<a class="code" href="struct_q_subscr_list.html" title="Subscriber-List structure.">QSubscrList</a> *subscrSto, <a class="code" href="qevent_8h.html#af55248e13cdc5784f0824c7615c41b7d" title="QSignal represents the signal of an event.">QSignal</a> maxSignal);
<a name="l00708"></a>00708 
<a name="l00740"></a>00740 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a63817909aa88407fd7d6c1ff3706a249" title="Event pool initialization for dynamic allocation of events.">QF_poolInit</a>(<span class="keywordtype">void</span> *poolSto, uint32_t poolSize, QEventSize evtSize);
<a name="l00741"></a>00741 
<a name="l00762"></a>00762 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run</a>(<span class="keywordtype">void</span>);
<a name="l00763"></a>00763 
<a name="l00782"></a>00782 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#adf9cb86740bf55c5ad55c1d44fd35921" title="Function invoked by the application layer to stop the QF application and return control to the OS/Ker...">QF_stop</a>(<span class="keywordtype">void</span>);
<a name="l00783"></a>00783 
<a name="l00790"></a>00790 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a189a6d2ece787717c81fbf51fd180732" title="Startup QF callback.">QF_onStartup</a>(<span class="keywordtype">void</span>);
<a name="l00791"></a>00791 
<a name="l00805"></a>00805 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a5d7e181f2e679e1fa77c1e915fbee3e0" title="Cleanup QF callback.">QF_onCleanup</a>(<span class="keywordtype">void</span>);
<a name="l00806"></a>00806 
<a name="l00830"></a>00830 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle</a>(<span class="keywordtype">void</span>);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832 <span class="preprocessor">#ifdef Q_SPY</span>
<a name="l00833"></a>00833 <span class="preprocessor"></span>
<a name="l00848"></a>00848     <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a569a926df9b5180cd9e03b0c9f78adcf" title="Publish event to the framework.">QF_publish</a>(<a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e, <span class="keywordtype">void</span> <span class="keyword">const</span> *sender);
<a name="l00849"></a>00849 
<a name="l00869"></a><a class="code" href="qf_8h.html#afd57334f2a1664a168b0702a106e0782">00869</a> <span class="preprocessor">    #define QF_PUBLISH(e_, sender_)        QF_publish((e_), (sender_))</span>
<a name="l00870"></a>00870 <span class="preprocessor"></span>
<a name="l00871"></a>00871 <span class="preprocessor">#else</span>
<a name="l00872"></a>00872 <span class="preprocessor"></span>
<a name="l00873"></a>00873     <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a569a926df9b5180cd9e03b0c9f78adcf" title="Publish event to the framework.">QF_publish</a>(<a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00874"></a>00874 <span class="preprocessor">    #define QF_PUBLISH(e_, dummy_)        QF_publish(e_)</span>
<a name="l00875"></a>00875 <span class="preprocessor"></span>
<a name="l00876"></a>00876 <span class="preprocessor">#endif</span>
<a name="l00877"></a>00877 <span class="preprocessor"></span>
<a name="l00878"></a>00878 <span class="preprocessor">#ifdef Q_SPY</span>
<a name="l00879"></a>00879 <span class="preprocessor"></span>
<a name="l00894"></a>00894     <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a6eb99da137293ba6960bb2eaf9965d3e" title="Processes all armed time events at every clock tick.">QF_tick</a>(<span class="keywordtype">void</span> <span class="keyword">const</span> *sender);
<a name="l00895"></a>00895 
<a name="l00915"></a><a class="code" href="qf_8h.html#a095356f76aa32cb738325abfa55e96fc">00915</a> <span class="preprocessor">    #define QF_TICK(sender_)              QF_tick(sender_)</span>
<a name="l00916"></a>00916 <span class="preprocessor"></span>
<a name="l00917"></a>00917 <span class="preprocessor">#else</span>
<a name="l00918"></a>00918 <span class="preprocessor"></span>
<a name="l00919"></a>00919     <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a6eb99da137293ba6960bb2eaf9965d3e" title="Processes all armed time events at every clock tick.">QF_tick</a>(<span class="keywordtype">void</span>);
<a name="l00920"></a>00920 <span class="preprocessor">    #define QF_TICK(dummy_)               QF_tick()</span>
<a name="l00921"></a>00921 <span class="preprocessor"></span>
<a name="l00922"></a>00922 <span class="preprocessor">#endif</span>
<a name="l00923"></a>00923 <span class="preprocessor"></span>
<a name="l00924"></a>00924 <span class="comment">/* functions used in the QF ports only -------------------------------------*/</span>
<a name="l00925"></a>00925 
<a name="l00937"></a>00937 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#aa9425659a2eb0e6f543d2405b762dcc9" title="Register an active object to be managed by the framework.">QF_add_</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *a);
<a name="l00938"></a>00938 
<a name="l00951"></a>00951 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a649efffb1de001dc75719fcf548e7045" title="Remove the active object from the framework.">QF_remove_</a>(<a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> <span class="keyword">const</span> *a);
<a name="l00952"></a>00952 
<a name="l00963"></a>00963 <a class="code" href="qevent_8h.html#a40bb5262bf908c328fbcfbe5d29d0201" title="typedef for character strings.">char_t</a> <span class="keyword">const</span> Q_ROM * Q_ROM_VAR <a class="code" href="qf_8h.html#ac590db3a7b49ddce526c527df2b7925f" title="Returns the QF version.">QF_getVersion</a>(<span class="keywordtype">void</span>);
<a name="l00964"></a>00964 
<a name="l00974"></a>00974 <a class="code" href="qevent_8h.html#a40bb5262bf908c328fbcfbe5d29d0201" title="typedef for character strings.">char_t</a> <span class="keyword">const</span> Q_ROM * Q_ROM_VAR <a class="code" href="qf_8h.html#a43b0dc29cba67147b76838144a901c38" title="Returns the QF-port version.">QF_getPortVersion</a>(<span class="keywordtype">void</span>);
<a name="l00975"></a>00975 
<a name="l00988"></a>00988 uint32_t <a class="code" href="qf_8h.html#a7e3571c5cb12f59994d97d5b28560934" title="This function returns the margin of the given event pool.">QF_getPoolMargin</a>(uint8_t poolId);
<a name="l00989"></a>00989 
<a name="l01002"></a>01002 uint32_t <a class="code" href="qf_8h.html#a5691094be4c3f02200e43d51535ed172" title="This function returns the margin of the given event queue.">QF_getQueueMargin</a>(uint8_t prio);
<a name="l01003"></a>01003 
<a name="l01009"></a>01009 <a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> *<a class="code" href="qf_8h.html#a2128fe3499dc6ed8100f5deed5a779a1" title="Internal QF implementation of the dynamic event allocator.">QF_new_</a>(QEventSize evtSize, <a class="code" href="qevent_8h.html#af55248e13cdc5784f0824c7615c41b7d" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l01010"></a>01010 
<a name="l01024"></a><a class="code" href="qf_8h.html#abd823f3a9e8b3206a3460a108d5fa3e3">01024</a> <span class="preprocessor">#define Q_NEW(evtT_, sig_) \</span>
<a name="l01025"></a>01025 <span class="preprocessor">    ((evtT_ *)QF_new_((QEventSize)sizeof(evtT_), (QSignal)(sig_)))</span>
<a name="l01026"></a>01026 <span class="preprocessor"></span>
<a name="l01048"></a>01048 <span class="keywordtype">void</span> <a class="code" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc</a>(<a class="code" href="struct_q_event.html" title="Event structure.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l01049"></a>01049 
<a name="l01058"></a>01058 <span class="keyword">extern</span> uint8_t <span class="keyword">const</span> Q_ROM Q_ROM_VAR <a class="code" href="qf_8h.html#ab47e1f0b5f8a97bc75f7ff7d62c5e18f" title="Lookup table for (log2(n) + 1), where n is the index into the table.">QF_log2Lkup</a>[256];
<a name="l01059"></a>01059 
<a name="l01065"></a>01065 <span class="keyword">extern</span> uint8_t <span class="keyword">const</span> Q_ROM Q_ROM_VAR <a class="code" href="qf_8h.html#a2091dd1ed771cbef5ca70e1542829cc4" title="Lookup table for (1 &lt;&lt; ((n-1) % 8)), where n is the index into the table.">QF_pwr2Lkup</a>[65];
<a name="l01066"></a>01066 
<a name="l01072"></a>01072 <span class="keyword">extern</span> uint8_t <span class="keyword">const</span> Q_ROM Q_ROM_VAR <a class="code" href="qf_8h.html#a01186f1b8051d6e98c86f76bd9d95f32" title="Lookup table for ~(1 &lt;&lt; ((n-1) % 8)), where n is the index into the table.">QF_invPwr2Lkup</a>[65];
<a name="l01073"></a>01073 
<a name="l01078"></a>01078 <span class="keyword">extern</span> uint8_t <span class="keyword">const</span> Q_ROM Q_ROM_VAR <a class="code" href="qf_8h.html#a765803e2ff8d3550b3334efe9c366709" title="Lookup table for (n-1)/8.">QF_div8Lkup</a>[65];
<a name="l01079"></a>01079 
<a name="l01080"></a>01080 
<a name="l01085"></a>01085 <span class="keyword">extern</span> <a class="code" href="struct_q_active.html" title="Active Object structure.">QActive</a> *<a class="code" href="qf_8h.html#a563e9f8e405ba684acba0b8f1a3ad9a6" title="array of registered active objects">QF_active_</a>[];
<a name="l01086"></a>01086 
<a name="l01087"></a>01087 <span class="preprocessor">#endif                                                              </span><span class="comment">/* qf_h */</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 30 2012 22:21:50 for QP/C by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
