<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>QP/C: QP/C Revision History</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">QP/C
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">QP/C Revision History </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="qpc_4_4_00"></a>
Version 4.4.00 (Product) Release date: Jan 30, 2012</h2>
<p>The main pupose of this relase is MISRA-C:2004 compliance, strong-type checking compliance, update of PC-Lint option files and tests, and general cleanup.</p>
<p>1. Moved the <a class="el" href="qp__port_8h_source.html">qp_port.h</a> header file from the port directories to the qcp directory. Also, moved the inclusion of the QS (Spy) header files (<a class="el" href="qs__port_8h.html" title="QS/C port to QS for a &quot;generic&quot; C compiler.">qs_port.h</a>/qs_dummy.h) from <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a>, <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a>, and <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> headers to <a class="el" href="qp__port_8h_source.html">qp_port.h</a>. These structural changes were made to reduce the number of preprocessor #if nesting levels below 8, which is the ANSI-C limit. This was done to comply with the MISRA-C rule 1.1 (all code shall conform to ANSI/ISO C).</p>
<p>NOTE: This modifications have impact on most QP/C ports, because the <a class="el" href="qp__port_8h_source.html">qp_port.h</a> header file must be removed from the port.</p>
<p>2. Added the PC-Lint option files std.lnt and lib-qpc.lnt to the qcp/include/ directory.</p>
<p>3. Cleaned the whole QP/C code from lint comments. All PC-Lint options have been moved to PC-Lint option files.</p>
<p>4. Modified QP assertion macro <a class="el" href="qassert_8h.html#a302498d7d57ae4196cb0745ac65959ae">Q_DEFINE_THIS_MODULE()</a> to avoid using the # operator (MISRA rule 19.13). This macro now requires the argument enclosed in doble quotes "".</p>
<p>NOTE: This modification has impact on some QP/C ports.</p>
<p>4. Added typedefs for char_t, int_t, float32_t, and float64_t to event.h header file for compliance with MISRA-C:2004 rules 6.1 and 6.3.</p>
<p>5. Added macros <a class="el" href="qep_8h.html#a6531b0ab582f41275f19d28ac91d9e4f" title="Perform cast to QStateHandler.">Q_STATE_CAST()</a> and <a class="el" href="qep_8h.html#ad9c809e4d94ebfd137643844284c5d1c" title="Perform downcast of an event onto a subclass of QEvent class_.">Q_EVENT_CAST()</a> to <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> to encapsulate deviation from MISRA-C rule 11.4.</p>
<p>6. Added macro <a class="el" href="qevent_8h.html#ad28acca1ff94561bd0f1dbc5f2532d49" title="Perform cast from unsigned integer uint_ to pointer of type type_.">Q_UINT2PTR_CAST()</a> to encapsulate casting unsigned integers to pointers, which deviates from MISRA-C rule 11.3. This macro has been added for *application-level* code.</p>
<p>7. Updated ARM Cortex-M examples with the latest CMSIS v3.0, which complies with more MISRA-C:2004 rules.</p>
<p>8. Added DPP examples for MISRA-C:2004 compliant applications (for IAR-ARM and GNU-ARM).</p>
<p>9. Added testing of PC-Lint option files against the MISRA-C Exemplar Suite.</p>
<p>10. Updated ARM-Cortex-M3 port with GNU to the latest Sourcery CodeBench 2011.09-60.</p>
<p>11. Added documentation to QP/C distribution in the directory qpc/doc/, with the following Application notes: "MISRA-C:2004 Compliance Matrix", "Quantum Leaps Coding Standard", "QP and ARM Cortex-M, and QP and Windows",</p>
<h2><a class="anchor" id="qpc_4_3_00"></a>
Version 4.3.00 (Product) Release date: Nov 01, 2011</h2>
<p>1. This release changes the names of critical section macros and introduces macros for unconditional interrupt disabling/enabling. This is done to simplify and speed up the built-in Vanilla and QK kernels, which no longer are dependent on the interrupt locking policy.</p>
<p>NOTE: The change in handling the critical section in the Vanilla and QK kernels can break QP ports, which use the "save and restore
interrupt lock" policy, because all such ports must also define unconditional interrupt disabling and enabling.</p>
<p>2. This release changes the partitioning of the QK scheduler. Specifically, the QK scheduler is now divided between two functions <a class="el" href="qk_8h.html#a91169080a96934668fa3aea0fa2050e9" title="Find the highest-priority task ready to run.">QK_schedPrio_()</a> and <a class="el" href="qk_8h.html#afaccffd06f0f9786a7492b5ffbb3d89c" title="QK scheduler.">QK_sched_()</a>, to calculate the highest-priority task ready to run and to perform scheduling, respectively. The function <a class="el" href="qk_8h.html#a91169080a96934668fa3aea0fa2050e9" title="Find the highest-priority task ready to run.">QK_schedPrio_()</a> is useful to determine if scheduling is even necessary.</p>
<p>3. Updated all QP ports to comply with the new critical section names and policies.</p>
<p>4. Modified the ARM Cortex-M port qk_port.s to take advantage of the new structure of the QK scheduler.</p>
<p>5. Upgraded the examples for ARM Cortex with IAR EWARM to the latest IAR EWARM version 6.30.</p>
<p>6. Upgraded the examples for ARM Cortex with GNU (CodeSourcery) to the latest Sourcery CodeBench 2011.07-60.</p>
<h2><a class="anchor" id="qpc_4_2_04"></a>
Version 4.2.04 (Product) Release date: Sep 24, 2011</h2>
<p>The main pupose of this relase is to provide a bug fix for the QK port to ARM Cortex processors. The bug fix addresses a very rare and undocumented behavior of late-arrival of an interrupt while entering the PendSV exception. In this case the PENDSVSET bit in the NVIC-ICSR register is *not* cleared when finally PendSV is entered, so the PendSV exception is entered in a *different* state when it is entered via the late-arrival mechanism versus the normal activation of the exception through tail-chaining. The consequence of this undocumented and inconsistent hardware behavior, PendSV could be re-entered again before the SVCall exception cleans up the stack. The bug fix is implemented in the qk_port.s file and consists of clearing the PENDSVSET bit programmatically inside PendSV_Handler.</p>
<h2><a class="anchor" id="qpc_4_2_02"></a>
Version 4.2.02 (Product) Release date: Sep 08, 2011</h2>
<p>1. The main pupose of this relase is to repackage the default QP/C distribution to contain the single root directory qpc/ in the archive. That way, unziping the archive will produce only one directory (qpc/), which can be then changed by the user.</p>
<p>2. This release also changes the ARM Cortex QP ports with GNU. The suffix "_cs" has been added to all QP libraries generated by the Code Sourcery toolset (now Mentor Sourcery CodeBench). This is to distinguish libraries generated by different GNU-toolchains (such as CodeRed, Attolic, DevKit ARM, etc.)</p>
<h2><a class="anchor" id="qpc_4_2_01"></a>
Version 4.2.01 (Product) Release date: Aug 13, 2011</h2>
<p>1. Modified file <a class="el" href="qassert_8h.html" title="Customizable QP assertions.">qassert.h</a> to add assertion macros <a class="el" href="qassert_8h.html#a8808a28cad1ff01daf65ca8ee37de314">Q_ASSERT_ID</a>, <a class="el" href="qassert_8h.html#abacf59f21a2f59dc79ca39bb1ab9c3c0">Q_REQUIRE_ID</a>, <a class="el" href="qassert_8h.html#aa8639670682ec29addc58801137f1e23">Q_ENSURE_ID</a>, <a class="el" href="qassert_8h.html#aece62bcb3b8dbc7f070fb32a8b5ae184">Q_INVARIANT_ID</a>, and <a class="el" href="qassert_8h.html#ae16bddd04e54835e5bf8cbbb0ae90d30">Q_ERROR_ID</a>, which are better suited for unit testig, because they avoid the volatility of line numbers for indentifying assertions.</p>
<p>2. Added QP port and examples for Mac OS X on 80x86.</p>
<h2><a class="anchor" id="qpc_4_2_00"></a>
Version 4.2.00 (Product) Release date: Jul 14, 2011</h2>
<p>The goal of this milestone release is to extend the number of event pools (theoretically up to 255 pools) instead of just three event pools available up til now. Also, this release adds several improvements to the QS/QSPY software tracing, such as adding sender information to event posting so that sequence diagrams could be easily and automatically reconstructed from tracing data. Also, the tracing now supports 64-bit targets, such as embedded Linux 64-bit. Finally, this milestone release migrates the examples to use the environment variable QPC instead of relying on the relative path to the QP/C framework. This allows easier adaptation of the examples for real projects, which don't really belong to the examples directory.</p>
<p>The changes in detail are:</p>
<p>1. Changed the <a class="el" href="struct_q_event.html" title="Event structure.">QEvent</a> base struct (file <a class="el" href="qevent_8h.html" title="QEvent class and basic macros used by all QP components.">qevent.h</a>). The private member 'dynamic_' has been replaced by two members 'poolId_' and 'refCtr_'.</p>
<p>2. Added configuration macro QF_MAX_EPOOL (file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a>) to define the maximum number of event pools in the QP application (default to 3). The maximum theoretical number of this macro is 255.</p>
<p>3. Made algorithmic changes in the QF source code related to the change of storing the event pool-IDs and reference counters inside <a class="el" href="struct_q_event.html" title="Event structure.">QEvent</a>.</p>
<p>4. Changed the default signal size (macro Q_SIGNAL_SIZE in the file <a class="el" href="qevent_8h.html" title="QEvent class and basic macros used by all QP components.">qevent.h</a>) from 1 to 2 bytes.</p>
<p>5. Changed the signature of <a class="el" href="qf_8h.html#a352e707faee76e5cfd6c170a47c24fc3" title="Recall a deferred event from a given event queue.">QActive_recall()</a> to return uint8_t instead of QEvent*, which this could encourage incorrect usage (processing of the event at the point of recalling it). Now, the function only returns 1 (TRUE) if the event was recalled and 0 (FALSE) if the event was not recalled.</p>
<p>6. Added the function <a class="el" href="qf_8h.html#a974e633dccc976194e2df8d46e972779" title="Get the current value of the down-counter of a time event.">QTimeEvt_ctr()</a> and new source file <a class="el" href="qte__ctr_8c.html" title="QTimeEvt_ctr() implementation.">qte_ctr.c</a>. The function returns the counter of a time event, which allows using a time event for measuring the time.</p>
<p>7. Added new QF macros <a class="el" href="qf_8h.html#a095356f76aa32cb738325abfa55e96fc" title="Invoke the system clock tick processing QF_tick(). This macro is the recommended way of invoking cloc...">QF_TICK</a>, <a class="el" href="qf_8h.html#afd57334f2a1664a168b0702a106e0782" title="Invoke the event publishing facility QF_publish(). This macro is the recommended way of publishing ev...">QF_PUBLISH</a>, and <a class="el" href="qf_8h.html#ab7c56990d949c8708e3fe2b737f2e65c" title="Invoke the direct event posting facility QActive_postFIFO(). This macro is the recommended way of pos...">QACTIVE_POST</a> in file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> to provide sender of the events for software tracing.</p>
<p>8. Added new QS macros (files <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> and <a class="el" href="qs__dummy_8h.html" title="Dummy definitions of the QS macros that avoid code generation from the QS instrumentation.">qs_dummy.h</a>) for handling 64-bit integers.</p>
<p>9. Added the functions QS_u64() and QS_u64_() and new source file <a class="el" href="qs__u64_8c.html" title="QS_u64_() and QS_u64() implementation.">qs_u64.c</a>.</p>
<p>10. Added the QS macro <a class="el" href="qs_8h.html#a4cb0308eaa6b5df799251613ebfe9e7aad3b99bba3569a18a6810138b40f70361">QS_U32_HEX_T</a> for hexadecimal formatting of integer numbers in the user-defined trace records.</p>
<p>11. Added the new port linux64 for 64-bit Linux. Also added the corresponding examples for 64-bit Linux.</p>
<p>12. Adapted the QSPY host application for 64-bit pointer sizes and the changed layout of trace records that contain event information (such as PoolID and RefCtr). Also added the backwards-compatibility option (-v) for switching the tool to the previous data format.</p>
<p>13. Removed the tools directory from the QPC distribution and moved the QSPY host application to the QTOOLS distribution, which now also contains the GNU make tools for Windows.</p>
<p>14. Modified the make files and project files to use the environment variable QPC instead of relying on the relative path to the QP/C framework.</p>
<p>15. Upgraded the examples for ARM Cortex with IAR EWARM to the latest IAR EWARM 6.20.</p>
<h2><a class="anchor" id="qpc_4_1_07"></a>
Version 4.1.07 (Product) Release date: Feb 28, 2011</h2>
<p>The goal of this release is to improve the ease of experimenting with QP/C on the desktop. This release adds support for Windows (Win32) to the baseline code. Two most popular compilers for Windows are supported: Microsoft Visual Studio and MinGW (GNU). The support for Linux has been improved by including pre-built QP/C libraries and improving makefiles for Eclipse compatibility.</p>
<p>The changes in detail are:</p>
<p>1. Added Win32 port with the Visual C++ 2008 (ports/80x86/win32/vc2008). This directory contains the Visual Studio solution all_qp.sln for building all QP/C libraries from the IDE. Three build configurations (Debug, Release, and Spy) are supported.</p>
<p>2. Added Win32 port with the MinGW comiler (ports/80x86/win32/mingw). This directory contains the Makefile for building all QP/C libraries. Three build configurations (dbg, rel, and spy) are supported. NOTE: the Makefile assumes that the MinGW/bin directory is added to the PATH.</p>
<p>3. Added Win32 examples for Visual C++ 2008 (examples/80x86/win32/ vc2008/dpp and examples/80x86/win32/vc2008/qhsmtst). Visual Studio soultions are provides for all build configurations.</p>
<p>4. Added Win32 examples for MinGW (examples/80x86/win32/mingw/dpp and examples/80x86/win32/mingw/qhsmtst). Eclipse-compatible makefiles are provided for all build configurations. NOTE: the Makefiles assume that the MinGW/bin directory is added to the PATH.</p>
<p>5. Removed memory alignment correction in the file <a class="el" href="qmp__init_8c.html" title="QMPool_init() implementation.">qmp_init.c</a>. This correction required casting of pointers to integers and was problematic on 64-bit targets (such as 64-bit Linux).</p>
<p>6. Upgraded the examples for ARM Cortex with CodeSourcery to the latest Sourcery G++ 2011.02-2.</p>
<h2><a class="anchor" id="qpc_4_1_06"></a>
Version 4.1.06 (Product) Release date: Jan 07, 2011</h2>
<p>1. Made cosmetic improvements to the example QM models of the "Fly 'n' Shoot" game.</p>
<p>2. Made improvements in make.bat files for building the examples for DOS/Open Watcom to run better in DosBox on Linux.</p>
<p>3. Upgraded the examples for ARM Cortex with IAR to the latest IAR EWARM version 6.10.</p>
<p>4. Upgraded the examples for ARM Cortex with CodeSourcery to the latest Sourcery G++ 2010.09-66.</p>
<h2><a class="anchor" id="qpc_4_1_05"></a>
Version 4.1.05 (Product) Release date: Nov 01, 2010</h2>
<p>This release is adds examples for the QM (QP Modeler) graphical modeling and code generation tool. The examples are based on the "Fly 'n' Shoot" game described in the QP/C Tutorial and in Chapter 1 of the PSiCC2 book.</p>
<p>Specifically, the directory &lt;qpc&gt;/examples/80x86/dos/watcom/l/game-qm/ contains the "Fly 'n' Shoot" game model file "game.qm". This model, when opened in the QM tool contains all state machine diagrams and generates code into the subdirectory qm_code/. This code can then be built and executed on any 80x86 machine (newer versions of Windows or Linux require the DOSbox application, see <a href="http://www.dosbox.com">http://www.dosbox.com</a>).</p>
<p>The directory &lt;qpc&gt;/examples/arm-cortex/vanilla/iar/game-ev-lm3s811-qm/ contains the version of the game for the EV-LM3S811 ARM Cortex-M3 board. This directory contains the model file "game.qm", which is actually identical as the model in the DOS version. The LM3S811 version needs to be compiled with the IAR compiler and executed on the EV-LM3S811 board.</p>
<p>Additionally, the QP/C baseline code has been slighlty modified for better conformance to the MISRA C 2004 rules and the latest PC-Lint 9.x.</p>
<h2><a class="anchor" id="qpc_4_1_04"></a>
Version 4.1.04 (Product) Release date: Mar 16, 2010</h2>
<p>This release is adds compatibility of all examples for DOS with the DOSBox emulator (<a href="http://www.dosbox.com/">http://www.dosbox.com/</a>) that recreates a MS-DOS compatible environment on all versions of Windows, including 64-bit Windows that don't run 16-bit DOS applications anymore.</p>
<p>Also, this release includes QP ports and examples for EV-LM3S811 board with the GNU-based Code Sourcery G++ toolset. Support for Sourcery G++ provides a very cost-effective option for developing QP applications for ARM Cortex MCUs.</p>
<p>Finally, this release improves the Cortex Microcontroller Software Interface Standard (CMSIS) for the whole family of the Stellaris LM3Sxxx MCUs. The improvement extends the CMSIS from Sandstorm to Fury, DustDevil, and Tempest Stellaris families.</p>
<h2><a class="anchor" id="qpc_4_1_03"></a>
Version 4.1.03 (Product) Release date: Jan 21, 2010</h2>
<p>This release is concerned with the ARM Cortex ports and examples. Specifically, this release contains the following improvements:</p>
<p>1. Unified source code for ARM Cortex-M3 and the new ARM Cortex-M0 cores, including the code for the preemptive QK kernel.</p>
<p>2. Compliance with the Cortex Microcontroller Software Interface Standard (CMSIS) in all ARM Cortex examples.</p>
<p>3. Backward-compatible support for the new LM3S811 EVAL Rev C board with different OLED display than previous revisions. (NOTE: The OSRAM 96x16x1 OLED used in REV A-B boards has been replaced RITEK 96x16x1 OLED used in Rev C.)</p>
<p>In the process of making the examples CMSIS-compliant, the dependency on the Luminary Micro driver library (driverlib.a) has been completely removed.</p>
<p>Additionally, the screen saver of the "Fly 'n' Shoot" game has been improved to periodically switch off the power of the OLED display, which better protects the display from burn-in. The affected file is tunnel.c.</p>
<p>Finally, this release introduces the QP_VERSION macro, which identifies the QP version. Otherwise, this maintenance release does not change the QP/C API in any way, so the release has NO IMPACT on the QP/C applications except for the ARM Cortex ports and applications.</p>
<h2><a class="anchor" id="qpc_4_1_02"></a>
Version 4.1.02 (Product) Release date: Jan 14, 2010</h2>
<p>The purpose of this minor maintenance release is the change in the directory structure for the ARM Cortex ports and examples. As new ARM Cortex cores are becoming available, the old port name "cortex-m3" could be misleading, because it actually applies to wider range of ARM Cortex cores. Consequently, all ARM Cortex ports and examples are hosted in the directory tree called "arm-cortex".</p>
<p>This maintenance release does not change the QP/C API in any way, so the release has NO IMPACT on the QP/C applications except for the ARM Cortex ports and applications.</p>
<h2><a class="anchor" id="qpc_4_1_01"></a>
Version 4.1.01 (Product) Release date: Nov 05, 2009</h2>
<p>The main purpose of this release is to replace the Turbo C++ 1.01 toolset with the Open Watcom C/C++ toolset, because Turbo C++ 1.01 is no longer available for a free download. In contrast, Open Watcom is distributed under an OSI-certified open source license, which permits free commercial and non-commercial use. Open Watcom can be downloaded from www.openwatcom.org.</p>
<p>All 80x86/DOS, 80x86/qk, and 80x86/ucos2 ports and examples for Turbo C++ 1.01 have been replaced with ports and examples for Open Watcom. The make.bat scripts are provided to build the QP/C libraries and examples.</p>
<p>In the process of converting the examples to Open Watcom two new examples have been added to the standard QP/C distribution. The Calc2 example located in &lt;qpc&gt;/examples/80x86/dos/watcom/l/calc2 shows how to derive state machine classes with QP 4.x. The SLS example located in &lt;qpc&gt;/examples/80x86/dos/watcom/l/sls shows the implemenation of the new State-Local Storage state design pattern.</p>
<h2><a class="anchor" id="qpc_4_1_00"></a>
Version 4.1.00 (Product) Release date: Oct 09, 2009</h2>
<p>The release brings a number of improvements to QP/C and updates the QP/C ARM Cortex-M3 examples for the EK-LM3S811 board to the latest IAR EWARM 5.40.</p>
<p>This maintenance release does not change the QP/C API in any way, so the release has NO IMPACT on the QP/C applications.</p>
<p>The main changes in QP v4.1.00 with respect to earlier versions are as follows:</p>
<ul>
<li>in <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> added a new trace record QS_QEP_DISPATCH logged when an event is dispatched to a state machine. This timestamped trace record marks the beginning of an RTC step. The end of the RTC step is marked by the existing timestamped trace records QS_QEP_INTERN_TRAN, QS_QEP_INIT_TRAN, and QS_QEP_IGNORED, depending on how the event is handled. The new QS_QEP_DISPATCH record facilitates measurement of the RTC step lengths.</li>
<li>in <a class="el" href="qhsm__dis_8c.html" title="QHsm_dispatch() implementation.">qhsm_dis.c</a> added generation of the QS_QEP_DISPATCH trace record.</li>
<li>in the tools/qspy/ sub-directory added output of the new trace record to the Q-SPY host application.</li>
<li>in the tools/qspy/matlab/ sub-directory added processing of the new trace record to the qspy.m script.</li>
<li>in <a class="el" href="qpset_8h.html" title="platform-independent priority sets of 8 or 64 elements.">qpset.h</a> changed the implementation of the Priority Set. In particular, the <a class="el" href="struct_q_p_set64.html" title="Priority Set of up to 64 elements for building various schedulers.">QPSet64</a> now derives from <a class="el" href="struct_q_p_set8.html" title="Priority Set of up to 8 elements for building various schedulers.">QPSet8</a>, which enables a common way of testing for non-empty set (e.g., useful in assembly). Also, the findMax() functions in <a class="el" href="struct_q_p_set8.html" title="Priority Set of up to 8 elements for building various schedulers.">QPSet8</a> and <a class="el" href="struct_q_p_set64.html" title="Priority Set of up to 64 elements for building various schedulers.">QPSet64</a> now can work with an empty set, in which case they return 0.</li>
<li>in <a class="el" href="qk__sched_8c.html" title="QK_sched_() implementation.">qk_sched.c</a> simplified the QK_schedule_() function to skip the testing of the ready-set for non-empty condition. Such test is no longer necessary. The test can still be performed outside the QK_schedule_() function (e.g., in assembly) to avoid calling the scheduler if the ready set is empty.</li>
<li>in <a class="el" href="qk__ext_8c.html" title="QK_scheduleExt_() implementation.">qk_ext.c</a> simplified the QK_scheduleExt_() function in the same way as QK_schedule_().</li>
<li>modified make.bat files for building QP libraries in the ports/ directory to use the externally defined environment variables for the location of the toolchains. The defaults are applied only when the environment variable is not defined. This enables greater flexibility in installing the development tools in different directories than those chosen by Quantum Leaps.</li>
<li>modified the ARM Cortex-M3 examples for the new IAR EWARM 5.40.</li>
<li>modified slighlty the Calculator example to allow extensibility.</li>
<li>in the ARM Cortex-M3 port file qk_port.s added explicit testing of the QK_readySet_ set for empty condition. This test allows avoiding calling the QK scheduler and two contex-switches if the ready-set is empty.</li>
<li>in the game example moved setting up the QS filters from main.c to bsp.c.</li>
</ul>
<h2><a class="anchor" id="qpc_4_0_04"></a>
Version 4.0.04 (Product) Release date: Apr 09, 2009</h2>
<p>The maintenance release provides a fix for the compile-time assertions, which did not work correctly for the GNU compiler family. Also, the ARM Cortex-M3 examples have been recompiled with the newer IAR EWARM v5.30.</p>
<p>This maintenance release does not change the QP/C API in any way, so the release has NO IMPACT on the QP/C applications.</p>
<p>The main changes in QP v4.0.04 with respect to earlier version are as follows:</p>
<ul>
<li>in <a class="el" href="qassert_8h.html" title="Customizable QP assertions.">qassert.h</a> file the <a class="el" href="qassert_8h.html#a17f551ed8492f013d533f27353c091a3">Q_ASSERT_COMPILE</a> macro has been modified to render a negative array dimension when the asserted condition is not TRUE.</li>
</ul>
<h2><a class="anchor" id="qpc_4_0_03"></a>
Version 4.0.03 (Product) Release date: Dec 27, 2008</h2>
<p>The main purpose of this release is to fix a bug in the QK preemptive kernel, which occurs only when the advanced QK features are used. Specifically, the QK priority-ceiling mutex could interfere with QK thread-local storage (TLS) or QK extended context switch. When the QK mutex is in use, the TLS or the extended context for this task could get saved to an incorrect priority level.</p>
<p>The release 4.0.03 fixes the bug by strictly preserving the semantics of QK_currPrio_ variable. The mutex locking now uses a different variable QK_ceilingPrio_, which represents the ceiling-priority locked by the mutex. The QK scheduler and extended scheduler now perform an additional check to make sure that only tasks with priorities above the ceiling can run. To avoid that additional overhead, the user can define the macro QK_NO_MUTEX, which eliminates the QK mutex API and eliminates the additional tests in the QK schedulers.</p>
<p>This maintenance release does not change the QP/C API in any way, so the release has NO IMPACT on the QP/C applications.</p>
<p>The main changes in QP v4.0.03 with respect to earlier version are as follows:</p>
<ul>
<li>in <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> file made the QK mutex API only visible when the macro QK_NO_MUTEX is *not* defined.</li>
<li>in <a class="el" href="qk__pkg_8h.html" title="Internal (package scope) QK/C interface.">qk_pkg.h</a> file, added the QK_ceilingPrio_ external declaration when the macro QK_NO_MUTEX is not defined.</li>
<li>in <a class="el" href="qk__mutex_8c.html" title="QK_mutexLock()/QK_mutexUnlock() implementation.">qk_mutex.c</a> file, changed priority-ceiling mutex implementation to use the QK_ceilingPrio_ instead of QK_currPrio_. Also, added compiler error when the macro QK_NO_MUTEX is definedthis and this file is included in the build.</li>
<li>in <a class="el" href="qk__sched_8c.html" title="QK_sched_() implementation.">qk_sched.c</a> file added testing priority against the QK_ceilingPrio_, when the macro QK_NO_MUTEX is not defined.</li>
<li>in <a class="el" href="qk__ext_8c.html" title="QK_scheduleExt_() implementation.">qk_ext.c</a> file added testing priority against the QK_ceilingPrio_, when the macro QK_NO_MUTEX is not defined.</li>
</ul>
<h2><a class="anchor" id="qpc_4_0_02"></a>
Version 4.0.02 (Product) Release date: Nov 15, 2008</h2>
<p>This maintenance release does not change the QP/C API in any way, so the release has NO IMPACT on the QP/C applications.</p>
<p>The main changes in QP v4.0.02 with respect to earlier version are as follows:</p>
<ul>
<li>in <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> file, added comments to macros <a class="el" href="qep_8h.html#a8f06cd90ba5060780fc61a4810e3eb50" title="Designates a target for an initial or regular transition. Q_TRAN() can be used both in the FSMs and H...">Q_TRAN()</a> and <a class="el" href="qep_8h.html#ad8abd2f7098c41ec464343d9d8f1eadc" title="Designates the superstate of a given state in an HSM.">Q_SUPER()</a> to suppress the PC-lint warining about using the comma-operator (MISRA rule 42).</li>
<li>in <a class="el" href="qhsm__in_8c.html" title="QHsm_isIn() implementation.">qhsm_in.c</a> file, fixed a bug in the <a class="el" href="qep_8h.html#a2a491cdbad9aacee3d570ed63058e516" title="Tests if a given state is part of the current active state configuratioin.">QHsm_isIn()</a> function.</li>
<li>fixed a bug in tunnel.c file ("Fly 'n' Shoot" game). The constant event HIT_WALL was not declared static.</li>
</ul>
<h2><a class="anchor" id="qpc_4_0_01"></a>
Version 4.0.01 (Product) Release date: June 09, 2008</h2>
<p>This maintenace release is made to allow using QS software tracing with the GNU compiler for AVR (WinAVR). Specifically, the output of the strings residing in ROM has been fixed.</p>
<p>This maintenance release does not change the QP/C API in any way, so the release has NO IMPACT on the QP/C applications.</p>
<p>The main changes in QP v4.0.01 with respect to earlier version are as follows:</p>
<ul>
<li>in <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a> file, updated the function <a class="el" href="qs_8h.html#af9d329db3ed7c3c5965d5367890ee132" title="Output zero-terminated ASCII string element allocated in ROM without format information.">QS_str_ROM_()</a>.</li>
<li>in <a class="el" href="qs__str_8c.html" title="QS_str() adn QS_str_ROM() implementation.">qs_str.c</a> file, updated the function <a class="el" href="qs_8h.html#a30e118b6d8224de5f0615ea861b34716" title="Output zero-terminated ASCII string element allocated in ROM with format information.">QS_str_ROM()</a>.</li>
<li>in <a class="el" href="qvanilla_8c.html" title="&quot;vanilla&quot; cooperative kernel, QActive_start(), QActive_stop(), and QF_run() implementation.">qvanilla.c</a> file, funciton <a class="el" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a>, declared the temporary variables as static to save stack space, because <a class="el" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a> never returns and is not reentrant.</li>
</ul>
<h2><a class="anchor" id="qpc_4_0_00"></a>
Version 4.0.00 (Product) Release date: Apr 07, 2008</h2>
<p>This milestone release is made for the book /ref PSiCC2. The book describes in great detail this new release. The older "QP Programmer's Manual" is now phased out and is replaced with this hyper-linked /ref main_page "QP/C Reference Manual", which provides very detailed, easily searchable reference to the software. The book /ref PSiCC2 provies in-depth discussion of the relevant concepts as well as the design study of QP v4.0.</p>
<p>The main changes in QP v4.0 with respect to earlier versions are as follows:</p>
<ul>
<li>the coding techniques for hierarchical state machines (HSMs) and the simpler finite state machines (FSMs) have changed. While the changes are quite simple, the backward compatibility with QEP 3.x has been broken, meaning that some manual changes to the state machines implemented with earlier versions are necessary. Please refer to the "QP/C Tutorial" Section /ref coding_hsm for more information about coding state machines with QEP 4.x.<ul>
<li>The main change is the signature of a state-handler function, which now returns simply a byte. This return type (typedef'ed as QState) is the status of the event-handling that the state handler conveys to the QEP event processor.</li>
<li>The macro <a class="el" href="qep_8h.html#a8f06cd90ba5060780fc61a4810e3eb50" title="Designates a target for an initial or regular transition. Q_TRAN() can be used both in the FSMs and H...">Q_TRAN()</a> must now always follow the return statement.</li>
<li>The new macro <a class="el" href="qep_8h.html#ad8abd2f7098c41ec464343d9d8f1eadc" title="Designates the superstate of a given state in an HSM.">Q_SUPER()</a> designates the superstate of the given state. Again, this macro must follow the return statement.</li>
<li>Then two new macros <a class="el" href="qep_8h.html#a54b2da5e70ef983cfa7ca74deac237a3" title="Value returned by a state-handler function when it handles the event.">Q_HANDLED()</a> and <a class="el" href="qep_8h.html#a4b1bc93dc610e97650f324dc7901cd86" title="The macro returned from a non-hierarchical state-handler function when it ignores (does not handle) t...">Q_IGNORED()</a> have been added to return the status of event handled and event ignored, respectively.</li>
</ul>
</li>
</ul>
<ul>
<li>all callback functions are now consistently called /c #XXX_onYYY():<ul>
<li>Q_assert_handler() is now <a class="el" href="qassert_8h.html#a9527e43fe36b97365ae7d67560248da1">Q_onAssert()</a></li>
<li>QF_start() is now <a class="el" href="qf_8h.html#a189a6d2ece787717c81fbf51fd180732" title="Startup QF callback.">QF_onStartup()</a></li>
<li>QF_cleanup() is now <a class="el" href="qf_8h.html#a5d7e181f2e679e1fa77c1e915fbee3e0" title="Cleanup QF callback.">QF_onCleanup()</a></li>
</ul>
</li>
</ul>
<ul>
<li>the new header file <a class="el" href="qevent_8h.html" title="QEvent class and basic macros used by all QP components.">qevent.h</a> has been broken off the <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> header file. <a class="el" href="qevent_8h.html" title="QEvent class and basic macros used by all QP components.">qevent.h</a> contains the <a class="el" href="struct_q_event.html" title="Event structure.">QEvent</a> class and other basic facilities used in the whole QP. This new file allows easier replacement of the entire QEP event processor with custom event processors, if you wish do so.</li>
<li>the macro QEP_SIGNAL_SIZE is renamed to <a class="el" href="qevent_8h.html#afdaa94c40e947b0340b4259eddce3561" title="The size (in bytes) of the signal of an event. Valid values: 1, 2, or 4; default 1.">Q_SIGNAL_SIZE</a>.</li>
<li>the data type QSTATE is now deprecated. Please use QState.</li>
<li>the "protected" in C don't no longer have the trailing underscore. For example, QHsm_ctor_() is replaced with <a class="el" href="qep_8h.html#a8b773acc2e243ce416869ab83ee5679c" title="protected &quot;constructor&quot; of a HSM. Performs the first step of HSM initialization by assigning the init...">QHsm_ctor()</a>, etc.</li>
<li>the #QF_FSM_ACTIVE macro is now deprecated. Instead, you have the family of macros #QF_ACTIVE_SUPER_, #QF_ACTIVE_CTOR_, #QF_ACTIVE_INIT_, #QF_ACTIVE_DISPATCH_, #QF_ACTIVE_STATE_, which allow replacing the base class for active objects in QF. By default, these macros are defined to use the QHsm class from the QEP hierarchical event processor, but you can replace the event processor, if you wish.</li>
<li>the internal macro QACTIVE_OSOBJECT_WAIT_() is now <a class="el" href="qk_8h.html#ae2426ed9b8543cbbccde98023d7773a7" title="Platform-dependent macro defining how QF should block the calling task when the QF native queue is em...">QACTIVE_EQUEUE_WAIT_()</a>.</li>
<li>the internal macro QACTIVE_OSOBJECT_SIGNAL_() is now <a class="el" href="qk_8h.html#ad4ad4a29e36b9ad8e2aff0e7074c2a68" title="Platform-dependent macro defining how QF should signal the active object task that an event has just ...">QACTIVE_EQUEUE_SIGNAL_()</a>.</li>
<li>the internal macro QACTIVE_OSOBJECT_ONIDLE_() is now <a class="el" href="qk_8h.html#a61cb9dfde96112710d74f08620875427" title="Platform-dependent macro defining the action QF should take when the native QF event queue becomes em...">QACTIVE_EQUEUE_ONEMPTY_()</a>.</li>
<li>the data mebers QActive.osObject and QActive.thread are now present only if the macros #QF_OS_OBJECT_TYPE and #QF_THREAD_TYPE are defined.</li>
<li>the QPSet class has been renamed to <a class="el" href="struct_q_p_set64.html" title="Priority Set of up to 64 elements for building various schedulers.">QPSet64</a>.</li>
<li>the QPSet_hasElements() has been renamed <a class="el" href="qpset_8h.html#a22ecade6c5c41bd7ccf4fa13743ccd88" title="the macro evaluates to TRUE if the priority set me is empty">QPSet64_notEmpty()</a></li>
<li>the QS software tracing is now better integrated with all QP components. You no longer need to explicitly include <a class="el" href="qs__port_8h.html" title="QS/C port to QS for a &quot;generic&quot; C compiler.">qs_port.h</a>, because it is automatically included when you define the macro #Q_SPY. Also the file <a class="el" href="qs__dummy_8h.html" title="Dummy definitions of the QS macros that avoid code generation from the QS instrumentation.">qs_dummy.h</a> is included automatically when the macro #Q_SPY is <b>not</b> defined.</li>
<li>the new header file <a class="el" href="qvanilla_8h.html" title="platform-independent interface to the cooperative &quot;vanilla&quot; kernel.">qvanilla.h</a> now replaces the file qsched.h.</li>
<li>the file qa_ctor.c is now obsolete.</li>
<li>the macros QF_SCHED_LOCK() and QF_SCHED_UNLOCK() are now obsolete.</li>
<li>the native QF event queues (both the active object event queues and the "raw" thread-safe queues) are slightly more efficient by counting down the head and tail pointers rather than up. This leads to wrap-around at zero, which is easier (faster) to test than any other wrap-around point. Also the native QF event queues maintain the minimum of the free events in the queue rather the maximum of used events.</li>
<li>the data member of QEQueue.nTot class is removed.</li>
<li>the <a class="el" href="qf_8h.html#a569a926df9b5180cd9e03b0c9f78adcf" title="Publish event to the framework.">QF_publish()</a> function has been re-written so that QF no does <b>not need to lock the scheduler</b>. The <a class="el" href="qf_8h.html#a569a926df9b5180cd9e03b0c9f78adcf" title="Publish event to the framework.">QF_publish()</a> function posts events to active objects with scheduler unlocked starting from the highest-priority active objects. However, the event is protected from inadvertent recycling by incrementing its reference counter before the publish operation. After the event is posted to all subscribers, the garbage collector <a class="el" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc()</a> is called to decrement the reference counter and recycle the event, if necessary.</li>
<li>the qf_run.c file is obsolete. The <a class="el" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a> function for the cooperative "vanilla" kernel is now implemented in the file <a class="el" href="qvanilla_8c.html" title="&quot;vanilla&quot; cooperative kernel, QActive_start(), QActive_stop(), and QF_run() implementation.">qvanilla.c</a>.</li>
<li>the <a class="el" href="qf_8h.html#a6eb99da137293ba6960bb2eaf9965d3e" title="Processes all armed time events at every clock tick.">QF_tick()</a> function has been rewritten to allow calling <a class="el" href="qf_8h.html#a6eb99da137293ba6960bb2eaf9965d3e" title="Processes all armed time events at every clock tick.">QF_tick()</a> from the task context as well as from the interrupt context. The nested critical section around <a class="el" href="qf_8h.html#a6eb99da137293ba6960bb2eaf9965d3e" title="Processes all armed time events at every clock tick.">QF_tick()</a> is no longer needed when it is called from the task level. Among others, this re-design <b>eliminates the need for the recursive</b> mutex in the POSIX QF port.</li>
<li>the <a class="el" href="qmpool_8h.html#aa302b94344244dd5ec650e4a2dc8f11f" title="Initializes the native QF event pool.">QMPool_init()</a> function has been re-designed to optimally align the memory buffer in a portable and platform-independent way. This should bring some performance improvements on some CPUs (e.g., 80x86).</li>
<li>the extended QK scheduler has been re-designed to save stack space. The extended context (e.g., coprocessor registers) are no longer saved on the precious stack, but rather in the active object.</li>
<li>a bug has been fixed in handling of Thread-Local Storage (TLS) in the QK scheduler and extended scheduler.</li>
</ul>
<ul>
<li>the -q (quiet) flag has been added to the QSPY host application.</li>
<li>the support for two new compilers for Windows has been added for the QSPY host application. The application can now be build with the MinGW GNU compiler for Windows as well as the Microsoft Visual C++ 2005.</li>
</ul>
<ul>
<li>the QP port to Linux has been improved by eliminating the need for recursive P-Thread mutex.</li>
</ul>
<ul>
<li>the QP port to MicroC/OS-II has been upgraded to the latest version 2.86.</li>
</ul>
<ul>
<li>all examples in the standard QP distribution have been cleaned up and updated to the latest QP API changes.</li>
<li>all examples that use QF now contain the QS software tracing support.</li>
</ul>
<h2><a class="anchor" id="qpc_3_4_01"></a>
Version 3.4.01 (Product)</h2>
<p>Release date: Sep 25, 2007</p>
<p>This product release adds the backward-compatibility layer so that previous QP/C ports continue to work with the new version.</p>
<p>This product release also comes with the updated "QP Programmer's Manual", which now includes the QS target component and the QSpy host application.</p>
<h2><a class="anchor" id="qpc_3_4_00"></a>
Version 3.4.00 (Beta)</h2>
<p>Release date: Sep 03, 2007</p>
<p>This release brings several changes with the overall goal of simplifying and improving consistency across the whole QP family of frameworks (QP/C, QP/C++, and QP-nano).</p>
<p>This release includes simplifying of the C naming conventions (see the updated Application Note <a href="http://www.state-machine.com/doc/AN_QL_Coding_Standard.pdf">"QL C/C++
Coding Standard"</a>). The double-underscore suffix for private data members of structures is no longer used. Single underscore is used still only for internal QP/C facilities that typically should not be used by the application programmer.</p>
<p>The main changes are made to the QEP component. The "static transition
optimization" has been removed altogether. This simplifies significantly the state machine structure (which now contains just the currently active state). Also, the efficiency is improved for processing the dynamic transitions and the stack usage is lower. This change brings the QEP/C implementation much closer to QEP-nano.</p>
<p>The other big change in this release is including the Quantum Spy (QS) component in the distribution. Previously, the QS component was available only under the commercial licensing. It is now open source, just as the rest of QP.</p>
<p>In, the QF/C component, the QTimerEvt_publishIn() and QTimeEvt_publishEvery() have been removed, because they introduced a coupling between time events and publish-subscribe. This is undesirable for projects that do not want to include the publish-subscribe facilty.</p>
<p>Finally, the revision history for individual QP/C components has been moved from the header files and is now consolidated in the header file doxygen/qpc_rev.h.</p>
<h2><a class="anchor" id="qpc_3_3_01"></a>
Version 3.3.01 (Product)</h2>
<p>Release date: Mar 17, 2007</p>
<p>The main change in this release is removing the 'const' declaration of two temporary variables inside <a class="el" href="qep_8h.html#aa3aae49d6ee450d49a876b203db19105" title="Dispatches an event to a HSM.">QHsm_dispatch()</a> and QHsm_tran() functions. This was necessary to compile the code with the MPLAB C18 compiler for PIC18 devices.</p>
<p>Other minor changes include adding the 'U' suffix (unsigned) to several numerical literals to avoid MPLAB C18 compiler warnings.</p>
<p>The changes in release 3.3.01 have NO impact on the existing QP/C ports.</p>
<ol type="1">
<li>in file <a class="el" href="qhsm__dis_8c.html" title="QHsm_dispatch() implementation.">qhsm_dis.c</a>:80 removed 'const' from the declaration of '*c'.</li>
<li>in file qhsm_tra.c:69 removed 'const' from the declaration of 'src'.</li>
<li>in file <a class="el" href="qep_8c.html" title="QEP_reservedEvt_ definition and QEP_getVersion() implementation.">qep.c</a> changed the version number to "3.3.01".</li>
<li>added the 'U' suffix to several numerical literals in files: <a class="el" href="qa__defer_8c.html" title="QActive_defer() and QActive_recall() implementation.">qa_defer.c</a>, <a class="el" href="qa__usuba_8c.html" title="QActive_unsubscribeAll() definition.">qa_usuba.c</a>, <a class="el" href="qf__gc_8c.html" title="QF_gc() implementation.">qf_gc.c</a>, <a class="el" href="qf__pool_8c.html" title="QF_pool_[] definition and QF_poolInit() implementation.">qf_pool.c</a>, qf_run.c</li>
<li>in file <a class="el" href="qf__act_8c.html" title="QF_active_[], QF_getVersion(), and QF_add_()/QF_remove_() implementation.">qf_act.c</a> changed the version number to "3.3.01".</li>
<li>added the cast to (uint8_t) to several numerical literals in the file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a>.</li>
<li>in file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> changed the version number to "3.3.01".</li>
<li>added the 'U' suffix to several numerical literals in file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a>.</li>
<li>in files <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a> and <a class="el" href="qs__str_8c.html" title="QS_str() adn QS_str_ROM() implementation.">qs_str.c</a> added explicit casting to (char const).</li>
<li>in file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> changed the version number to "3.3.01".</li>
</ol>
<h2><a class="anchor" id="qpc_3_3_00"></a>
Version 3.3.00 (Product)</h2>
<p>Release date: Jan 22, 2007</p>
<p>The main change in this release is removing #include &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt; from the <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> header file. This has been done becasue vast majority of embedded compilers for small MCUs actually do not provide the C-99 Standard header file &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt;. Worse, compilers such as Freescale HC(S)08 C/C++ compiler will not include &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt; unless it's in the compilers's include directory, even though the "stdint.h" file might be in the compiler include path.</p>
<p>Removing the "#include &lt;stdint.h&gt;" from <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> header file allows more flexibility in the way the standard exact-width integer types are defined. For compilers that do not provide the &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt; file, you provide the typedef's in the qpc_port.h file before including <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a>. For compilers that do provide the &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt; header file, you simply include this file in the qpc_port.h header file before including <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a>.</p>
<p>The changes in release 3.3.00 have impact on all QP ports, because you need to modify the qpc_port.h file in all these ports.</p>
<p>The other significant change in this release is adding the macro #Q_ROM_VAR for all constant objects allocated in ROM. The #Q_ROM_VAR macro has been added for the compilers like Freescale HC(S)08, which require far pointers to access the objects in ROM. Please note that specifying the pointer size for accessing a ROM objects is syntactically different than specifying that the object is allocated in ROM (see macro #Q_ROM).</p>
<p>Finally, in release 3.3.00 the build strategy for QP ports has been simplified as well. Instead of separate Makefile for every QP component, such as QEP, QF, QK, and QS, not the "ports" directory contains a batch file "make.bat" that builds all the libraries at once.</p>
<ol type="1">
<li>in file <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> removed "#include &lt;stdint.h&gt;".</li>
<li>in file <a class="el" href="qassert_8h.html" title="Customizable QP assertions.">qassert.h</a> added macro #Q_ROM_VAR for objects allocated in ROM and to signatures of functions accessing these objects.</li>
<li>in file <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> added macro #Q_ROM_VAR for objects allocated in ROM and to signatures of functions accessing these objects.</li>
<li>in file <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> added default empty definitions and Doxygen comments for macros #Q_ROM and #Q_ROM_VAR.</li>
<li>in file <a class="el" href="qep_8c.html" title="QEP_reservedEvt_ definition and QEP_getVersion() implementation.">qep.c</a> added macro #Q_ROM_VAR for objects allocated in ROM and to signatures of functions accessing these objects.</li>
<li>in file qf.c added macro #Q_ROM_VAR for objects allocated in ROM and to signatures of functions accessing these objects.</li>
<li>in file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> added macro #Q_ROM_VAR for objects allocated in ROM and to signatures of functions accessing these objects.</li>
<li>in file <a class="el" href="qep_8c.html" title="QEP_reservedEvt_ definition and QEP_getVersion() implementation.">qep.c</a> added Q_ROM_VAR to the signature of <a class="el" href="qep_8h.html#a758990e645c66113740054965ab53b78" title="obtain the current QEP version number string">QEP_getVersion()</a>.</li>
<li>in file <a class="el" href="qep_8c.html" title="QEP_reservedEvt_ definition and QEP_getVersion() implementation.">qep.c</a> changed the version number to "3.3.00".</li>
<li>in file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> added macro #Q_ROM_VAR for objects allocated in ROM and to signatures of functions accessing these objects.</li>
<li>in file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> removed method QF_getTime() and deleted external variable QF_tickCtr_.</li>
<li>deleted obsolete file qa_fifo_.c</li>
<li>deleted obsolete file qa_lifo_.c</li>
<li>deleted obsolete file qf_time.c</li>
<li>in file <a class="el" href="qf__act_8c.html" title="QF_active_[], QF_getVersion(), and QF_add_()/QF_remove_() implementation.">qf_act.c</a> added Q_ROM_VAR to the signature of <a class="el" href="qep_8h.html#a758990e645c66113740054965ab53b78" title="obtain the current QEP version number string">QEP_getVersion()</a>.</li>
<li>in file <a class="el" href="qf__log2_8c.html" title="QF_log2Lkup[] definition.">qf_log2.c</a> added Q_ROM_VAR to the definition of the lookup table.</li>
<li>in file <a class="el" href="qf__pwr2_8c.html" title="QF_pwr2Lkup[], QF_invPwr2Lkup[], and QF_div8Lkup[] definitions.">qf_pwr2.c</a> added Q_ROM_VAR to the definition of the lookup tables.</li>
<li>in file <a class="el" href="qf__tick_8c.html" title="QF_tick() implementation.">qf_tick.c</a> removed incrementing QF_tickCtr_.</li>
<li>In file <a class="el" href="qf__act_8c.html" title="QF_active_[], QF_getVersion(), and QF_add_()/QF_remove_() implementation.">qf_act.c</a> updated version number to 3.3.00</li>
<li>in file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> added macro #Q_ROM_VAR for objects allocated in ROM and to signatures of functions accessing these objects.</li>
<li>In file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> added #Q_ROM_VAR to the signature of <a class="el" href="qk_8h.html#a4fe0b802eee744c06de88e4d30b59149" title="get the current QK version number string">QK_getVersion()</a>.</li>
<li>In file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> updated version number to 3.3.00</li>
<li>in file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> added macro #QS_ROM_VAR for objects allocated in ROM and to signatures of functions accessing these objects.</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> added default definitions of the QS macros #Q_ROM, #Q_ROM_VAR, and Q_ROM_BYTE.</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> added declaration of QS_tickCtr_.</li>
<li>In file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> added #Q_ROM_VAR to the signature of <a class="el" href="qs_8h.html#abcca1158799c156c57b36f0432c93e1f" title="Get the current version of QS.">QS_getVersion()</a>.</li>
<li>In file <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a> added #Q_ROM_VAR to the signature of <a class="el" href="qs_8h.html#af9d329db3ed7c3c5965d5367890ee132" title="Output zero-terminated ASCII string element allocated in ROM without format information.">QS_str_ROM_()</a>.</li>
<li>In file <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a> added definition of QS_tickCtr_.</li>
<li>In file <a class="el" href="qs__str_8c.html" title="QS_str() adn QS_str_ROM() implementation.">qs_str.c</a> added #Q_ROM_VAR to the signature of <a class="el" href="qs_8h.html#a30e118b6d8224de5f0615ea861b34716" title="Output zero-terminated ASCII string element allocated in ROM with format information.">QS_str_ROM()</a>.</li>
<li>In file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> updated version number to 3.3.00</li>
<li>Updated the "QP Programmer's Manaul" to Revision E</li>
</ol>
<h2><a class="anchor" id="qpc_3_2_05"></a>
Version 3.2.05 (Product)</h2>
<p>Release date: Dec 08, 2006</p>
<p>This QF release rolls back the changes made to the reference-counting policy. The reference count of a dynamic event is incremented when the event is posted, but is NOT decremented when the event is retreived from the queue. The reference count is decremented only later, in the garbage collector (<a class="el" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc()</a>).</p>
<p>This release adds direct support for event deferral (the "Deferred Event" state pattern) through methods QActive_defer_() and QActive_recall_().</p>
<p>Also this release adapts the QS code to the specifics of the Keil C51 compiler for 8051/251. In particular, the C51 compiler treats the identifier "data" as an extended keyword. To make the QS code compile with C51, all "data" used as a formal function parameter have been renamed. Additionally, this release fixes a minor bug in the <a class="el" href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529" title="Output function dictionary record.">QS_FUN_DICTIONARY</a> macro.</p>
<ol type="1">
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> added methods QActive_defer_() and QActive_recall_().</li>
<li>In file <a class="el" href="qa__get___8c.html" title="QActive_get_() and QF_getQueueMargin() definitions.">qa_get_.c</a> removed decrementing the reference count of a dynamic event.</li>
<li>In file <a class="el" href="qeq__get_8c.html" title="QEQueue_get() definition. NOTE: this function is used for the &quot;raw&quot; thread-safe queues and NOT for th...">qeq_get.c</a> removed decrementing the reference count of a dynamic event.</li>
<li>In file qf_gc.cpp restored decrementing of the reference count of a dynamic event.</li>
<li>Added new file <a class="el" href="qa__defer_8c.html" title="QActive_defer() and QActive_recall() implementation.">qa_defer.c</a> that implements QActive_defer_() and QActive_recall_().</li>
<li>In file <a class="el" href="qf__act_8c.html" title="QF_active_[], QF_getVersion(), and QF_add_()/QF_remove_() implementation.">qf_act.c</a> updated version number to 3.2.05</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> removed all instances of indentifier "data"</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> fixed a bug in the definition of macro <a class="el" href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529" title="Output function dictionary record.">QS_FUN_DICTIONARY</a>.</li>
<li>In file <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a> renamed all instances of identifier "data".</li>
<li>In file <a class="el" href="qs__f32_8c.html" title="QS_f32() implementation.">qs_f32.c</a> renamed all instances of identifier "data".</li>
<li>In file <a class="el" href="qs__f64_8c.html" title="QS_f64() implementation.">qs_f64.c</a> renamed all instances of identifier "data".</li>
<li>In file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a>, in functions <a class="el" href="qs_8h.html#a4d68eb9ce36910c00fcf2204503216f3" title="Turn the global Filter on for a given record type rec.">QS_filterOn()</a> and <a class="el" href="qs_8h.html#a0a6cda32af751d521c71e1ce7b44256e" title="Turn the global Filter off for a given record type rec.">QS_filterOff()</a> moved the declaration of the temporary variable 'i' from the inner scope to the function scope. The C51 compiler was crushing with variables at inner scope.</li>
<li>In file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> updated version number to 3.2.05</li>
<li>Updated the "QP Programmer's Manaul" to Revision D</li>
</ol>
<h2><a class="anchor" id="qpc_3_2_04"></a>
Version 3.2.04 (Beta)</h2>
<p>Release date: Dec 01, 2006</p>
<p>This QF release changes the internal policy of reference-counting for dynamic events. The reference count of a dynamic event is now incremented when the event is posted to a queue and decremented when the event is later retreived from the queue. This policy pertains to both active object queues and native QF thread-safe queues (<a class="el" href="struct_q_e_queue.html" title="Native QF Event Queue.">QEQueue</a>).</p>
<p>Previously, the reference count of a dynamic event was not decremented upon retreival of the event from the event queue, but rather in the garbage collector (<a class="el" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc()</a>).</p>
<p>This QK release adds two new features in QK.</p>
<p>The first feature added is the extended context switch for CPUs with co-processors, such as the x87 FPU accompanying the x86 CPU. As a fully- preemptive kernel, QK needs to save and restore the context of the co- processor accrosss the asynchronous preemption. This QK release adds a generic mechanism for saving and restoring extened context in the extended scheduler (QK_scheduleExt_()), which is used only at the exit from the interrupts (asynchronous preemptions).</p>
<p>The second feature added is the Thread-Local Storage (TLS) for reentrant libraries, such as the NewLib. This feature allows assigning per-thread memory and providing a hook (callback) activated at every context switch.</p>
<ol type="1">
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> eliminated methods QActive_postFIFO_() and QActive_postLIFO_().</li>
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> changed method QActive_get__() to <a class="el" href="qf_8h.html#a7f7c861d8e3e884d52cfe661056e8242" title="Get an event from the event queue of an active object.">QActive_get_()</a> (protected scope) to make it available to various thread-run routines.</li>
<li>In file <a class="el" href="qa__fifo_8c.html" title="QActive_postFIFO() definition.">qa_fifo.c</a> changed the implementation of <a class="el" href="qf_8h.html#a39bfd1c186beaf9c9000f14bcc258e5b" title="Posts an event e directly to the event queue of the acitve object me using the First-In-First-Out (FI...">QActive_postFIFO()</a> to represent the native QF event queue of an active object.</li>
<li>In file qa_fifo_.c removed the implementation of QActive_postFIFO__() and declared the file obsolete (will be removed in future releases).</li>
<li>In file <a class="el" href="qa__lifo_8c.html" title="QActive_postLIFO() definition.">qa_lifo.c</a> changed the implementation of <a class="el" href="qf_8h.html#a27984f6494cd1698adce6f8b957ad6c3" title="Posts an event directly to the event queue of the active object me using the Last-In-First-Out (LIFO)...">QActive_postLIFO()</a> to represent the native QF event queue of an active object.</li>
<li>In file qa_lifo_.c removed the implementation of QActive_postLIFO__() and declared the file obsolete (will be removed in future releases).</li>
<li>In file qa_get_.cpp added decrementing the reference count of a dynamic event.</li>
<li>In file <a class="el" href="qf__gc_8c.html" title="QF_gc() implementation.">qf_gc.c</a> removed decrementing of the reference count of a dynamic event. Also changed the test for recycling an event (reference count of zero).</li>
<li>In file <a class="el" href="qf__pspub_8c.html" title="QF_publish() implementation.">qf_pspub.c</a> removed incrementing the reference count of a dynamic event.</li>
<li>Removed all uses of the macros #QACTIVE_POST_FIFO_, #QACTIVE_POST_LIFO_, and QACTIVE_GET_. These macros are made now obsolete.</li>
<li>In file qsched.h removed definitions of the obsolete macros #QACTIVE_POST_FIFO_, #QACTIVE_POST_LIFO_, and QACTIVE_GET_.</li>
<li>In file <a class="el" href="qf__pspub_8c.html" title="QF_publish() implementation.">qf_pspub.c</a> replaced the macro QACTIVE_POST_FIFO_() with the direct call to the function QActive_postFIFO(QF_active_[p], e).</li>
<li>In file <a class="el" href="qf__tick_8c.html" title="QF_tick() implementation.">qf_tick.c</a> replaced the macro QACTIVE_POST_FIFO_() with the direct call to the function QActive_postFIFO(QF_active_[p], e).</li>
<li>Changed the uC/OS-II port to reflect new policy of handling reference counters inside the dynamic events. Also removed files <a class="el" href="qa__fifo_8c.html" title="QActive_postFIFO() definition.">qa_fifo.c</a> and <a class="el" href="qa__lifo_8c.html" title="QActive_postLIFO() definition.">qa_lifo.c</a> from the uC/OS-II build.</li>
<li>In file <a class="el" href="qf__act_8c.html" title="QF_active_[], QF_getVersion(), and QF_add_()/QF_remove_() implementation.">qf_act.c</a> updated version number to 3.2.04</li>
<li>In file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> updated revision history and added the prototype for the extended scheduler QK_scheduleExt_(). This scheduler implements the generic extended context via macros #QK_EXT_TYPE, <a class="el" href="qk__port_8h.html#a8dc2ef090cbfdb8068e02be7af74a7a7" title="Define the method for saving the extended context (e.g., the context of a floating-point co-processor...">QK_EXT_SAVE</a>, and <a class="el" href="qk__port_8h.html#a7300efd5716c71f33e1a0a17ac4a95ed" title="Define the method for restoring the extended context (e.g., the context of a floating-point co-proces...">QK_EXT_RESTORE</a>.</li>
<li>In file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> removed definitions of the obsolete macros #QACTIVE_POST_FIFO_, #QACTIVE_POST_LIFO_, and QACTIVE_GET_.</li>
<li>In file <a class="el" href="qk__sched_8c.html" title="QK_sched_() implementation.">qk_sched.c</a> added logic for handling the TLS via the macro <a class="el" href="qk__port_8h.html#a0fff98f5737d46ce7a2228e38486c5ba" title="Define the method for switching the Thread-Local-Storage for for a given thread.">QK_TLS</a>.</li>
<li>Added new file <a class="el" href="qk__ext_8c.html" title="QK_scheduleExt_() implementation.">qk_ext.c</a> with the definition of the extended scheduler QK_scheduleExt_().</li>
<li>Added the file <a class="el" href="qk__ext_8c.html" title="QK_scheduleExt_() implementation.">qk_ext.c</a> to the Makefile for QK port to 80x86 with Turbo C++ 1.01.</li>
<li>Extended the QK port to 80x86 with Turbo C++ 1.01 to handle the x87 FPU context.</li>
<li>Extended the QDPP example for QK with Turbo C++ 1.01 to demonstrate threads that use the FPU and require the extended context switch.</li>
<li>In file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> updated version number to 3.2.04</li>
<li>Updated the "QP Programmer's Manaul" to Revision C</li>
</ol>
<h2><a class="anchor" id="qpc_3_2_03"></a>
Version 3.2.03 (Product)</h2>
<p>Release date: Nov 15, 2006</p>
<p>The main purpose of this release is to adapt the code to the shortcomings of the gcc compiler for handling data in program ROM for Harvard architecture CPUs, such as the Atmel's AVR or the 8051. In such machines, the data space (RAM) and program space (ROM) are accessed with different instructions. The gcc compiler does not automatically synthesize the correct code for accessing data placed in the program ROM, even though __attribute__((__progmem__)) is used. The workaround for the gcc is to add special assembly instructions to transfer the data from the program space to the data space. This version of QP/C adds macros for each data element allocated to the program space (delcared with the Q_ROM attribute). Please note that commercial compilers, such as IAR, handle data allocated in the program space (ROM) correctly and do not need any workarounds.</p>
<p>This release also fixes a few minor inconsistencies in the code (see the list below):/</p>
<ol type="1">
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> added default definition of macro #Q_ROM_BYTE</li>
<li>In file qf_set.h added macro #Q_ROM_BYTE to access the lookup tables allocated in ROM (several places).</li>
<li>In file qf_sched.h changed types QF_OS_OBJECT_TYPE and QF_THREAD_TYPE to uint8_t from int8_t</li>
<li>In file <a class="el" href="qs__dummy_8h.html" title="Dummy definitions of the QS macros that avoid code generation from the QS instrumentation.">qs_dummy.h</a> added dummy definitions of some missing QS macros</li>
<li>In file <a class="el" href="qa__sub_8c.html" title="QActive_subscribe() definition.">qa_sub.c</a> added macro #Q_ROM_BYTE to access the lookup tables allocated in ROM (several places).</li>
<li>In file <a class="el" href="qa__usub_8c.html" title="QActive_unsubscribe() definition.">qa_usub.c</a> added macro #Q_ROM_BYTE to access the lookup tables allocated in ROM (several places).</li>
<li>In file qf_usuba.c added macro #Q_ROM_BYTE to access the lookup tables allocated in ROM (several places).</li>
<li>In file <a class="el" href="qf__pspub_8c.html" title="QF_publish() implementation.">qf_pspub.c</a> added macro #Q_ROM_BYTE to access the lookup tables allocated in ROM (several places).</li>
<li>In file <a class="el" href="qf__act_8c.html" title="QF_active_[], QF_getVersion(), and QF_add_()/QF_remove_() implementation.">qf_act.c</a> updated version number to 3.2.03</li>
<li>In file <a class="el" href="qs__pkg_8h.html" title="Internal (package scope) QS/C interface.">qs_pkg.h</a> added default definition of macro #Q_ROM_BYTE</li>
<li>In file <a class="el" href="qa__sub_8c.html" title="QActive_subscribe() definition.">qa_sub.c</a> added macro #Q_ROM_BYTE to access the lookup tables allocated in ROM (several places).</li>
<li>In file <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a> added macro #Q_ROM_BYTE to access the string allocated in ROM</li>
<li>In file <a class="el" href="qs__str_8c.html" title="QS_str() adn QS_str_ROM() implementation.">qs_str.c</a> added macro #Q_ROM_BYTE to access the string allocated in ROM.</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> changed the include file name from "qs_dummy" to "qs_dummy.h".</li>
<li>In file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> updated version number to 3.2.03</li>
</ol>
<h2><a class="anchor" id="qpc_3_2_02"></a>
Version 3.2.02 (Product)</h2>
<p>Release date: Oct 30, 2006</p>
<ol type="1">
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> replaced macro Q_ROM with QS_ROM</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> added methods <a class="el" href="qs_8h.html#af9d329db3ed7c3c5965d5367890ee132" title="Output zero-terminated ASCII string element allocated in ROM without format information.">QS_str_ROM_()</a> and <a class="el" href="qs_8h.html#a30e118b6d8224de5f0615ea861b34716" title="Output zero-terminated ASCII string element allocated in ROM with format information.">QS_str_ROM()</a></li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> added macros <a class="el" href="qs_8h.html#a9e76bdf4e360917f4307d378034dfc42" title="Internal QS macro to output a zero-terminated ASCII string allocated in ROM data element.">QS_STR_ROM_()</a> and <a class="el" href="qs_8h.html#a7f6f1126a11ee04ae6e3a3d6dd00eba3" title="Output formatted zero-terminated ASCII string from ROM to the QS record.">QS_STR_ROM()</a></li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> modified macros QS_???_DICTIONARY() to use ROM strings</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> included <a class="el" href="qs__dummy_8h.html" title="Dummy definitions of the QS macros that avoid code generation from the QS instrumentation.">qs_dummy.h</a> instead of the dummy definitions of the QS macros</li>
<li>In file <a class="el" href="qs__pkg_8h.html" title="Internal (package scope) QS/C interface.">qs_pkg.h</a> added #ifndef Q_SPY before definition of macro Q_SPY</li>
<li>In file <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a> added definition of the function <a class="el" href="qs_8h.html#af9d329db3ed7c3c5965d5367890ee132" title="Output zero-terminated ASCII string element allocated in ROM without format information.">QS_str_ROM_()</a></li>
<li>In file qs_str.cpp added definition of the function <a class="el" href="qs_8h.html#a30e118b6d8224de5f0615ea861b34716" title="Output zero-terminated ASCII string element allocated in ROM with format information.">QS_str_ROM()</a></li>
<li>In file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> updated version number to 3.2.02</li>
</ol>
<h2><a class="anchor" id="qpc_3_2_01"></a>
Version 3.2.01 (Product)</h2>
<p>Release date: Sep 01, 2006</p>
<ol type="1">
<li>In file <a class="el" href="qep_8c.html" title="QEP_reservedEvt_ definition and QEP_getVersion() implementation.">qep.c</a> updated version number to 3.2.01</li>
<li>Added makefiles for building ports of all QP/C libraries at once.</li>
<li>Created the consolidated manual "QP/C Programmer's Manual".</li>
<li>In file <a class="el" href="qf__act_8c.html" title="QF_active_[], QF_getVersion(), and QF_add_()/QF_remove_() implementation.">qf_act.c</a> updated version number to 3.2.01</li>
<li>Added makefiles for building ports of all QP/C libraries at once.</li>
<li>Created the consolidated manual "QP/C Programmer's Manual".</li>
<li>In file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> updated version number to 3.2.01</li>
<li>Added makefiles for building ports of all QP/C libraries at once.</li>
<li>In file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> updated version number to 3.2.01</li>
<li>In file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> removed superfluous semicolons after QS_INSERT...() macros</li>
<li>In file <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a> removed superfluous semicolons after QS_INSERT...() macros</li>
<li>In file <a class="el" href="qs__str_8c.html" title="QS_str() adn QS_str_ROM() implementation.">qs_str.c</a> removed superfluous semicolons after QS_INSERT...() macros</li>
<li>In file <a class="el" href="qs__mem_8c.html" title="QS_mem() implementation.">qs_mem.c</a> removed superfluous semicolons after QS_INSERT...() macros</li>
<li>In file <a class="el" href="qs__f32_8c.html" title="QS_f32() implementation.">qs_f32.c</a> removed superfluous semicolons after QS_INSERT...() macros</li>
<li>In file <a class="el" href="qs__f64_8c.html" title="QS_f64() implementation.">qs_f64.c</a> removed superfluous semicolons after QS_INSERT...() macros</li>
<li>Added makefiles for building ports of all QP/C libraries at once.</li>
<li>Created the consolidated manual "QP/C Programmer's Manual".</li>
</ol>
<h2><a class="anchor" id="qpc_3_2_00"></a>
Version 3.2.00 (Product)</h2>
<p>Release date: Aug 07, 2006</p>
<ol type="1">
<li>In file <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a> added the default definition of Q_ROM in case it's not defined by the user.</li>
<li>In file <a class="el" href="qassert_8h.html" title="Customizable QP assertions.">qassert.h</a> added the macro Q_ROM to allocate constant strings to ROM.</li>
<li>In file <a class="el" href="qep_8c.html" title="QEP_reservedEvt_ definition and QEP_getVersion() implementation.">qep.c</a> updated version number to 3.2.00</li>
<li>Updated the "QEP/C Programmer's Manual".</li>
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> changed the semantics of the <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a> callback. This callback is now invoked with interrupts LOCKED from the non-preemptive scheduler used in the "vanilla" QF ports to "bare metal" target boards.<br/>
 <br/>
 The modification changes the responsibilities of <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a>, which now MUST at least unlock interrupts. A failure to unlock interrupts in <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a> will leave the interrupts locked all the time and would prevent the application from running.<br/>
 <br/>
 Also, the signature of <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a> now depends on the interrupt locking policy. In case of the "save and restore interrupt status" policy, the <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a> callback takes the interrupt lock key as parameter (to be able to unlock the interrups correctly).</li>
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> used the macro Q_ROM to allocate constant objects to ROM (/sa <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a>). Objects allocated to ROM are: the version strings, and the lookup tables (QF_log2Lkup[], QF_pwr2Lkup[], QF_invPwr2Lkup, and QF_div8Lkup[].</li>
<li>Added new platform-independent header file qsched.h to provide the interface to the simple non-preemptive scheduler used in the "vanilla" ports of QF to "bare metal" targets. This header file is only applicable to the "vanilla" ports.</li>
<li>Added new platform-independent implementation file qf_run.c to implement the simple non-preemptive scheduler used in the "vanilla" ports of QF to "bare metal" targets. This implementation file eliminates the need for qf_port.c file in the "vanilla" ports of QF. Also, the qf_run.c module should only be placed in the QF library in the vanilla QF ports.</li>
<li>Simplified all "vanilla" ports of QF to use the common platform- independent implementation provided in qf_run.c.</li>
<li>Updated <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a> callback in all examples of "vanilla" ports of QF to unlock interrupts.</li>
<li>Modified file <a class="el" href="qf__pspub_8c.html" title="QF_publish() implementation.">qf_pspub.c</a> to allow allocating a temporary stack variable inside the macro QF_SCHED_LOCK(). This change is related to modification in QK v 3.2.00.</li>
<li>Updated the "QF/C Programmer's Manual".</li>
<li>in file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> added new idle callback <a class="el" href="qk_8h.html#a667daad24b172e782fe4e2b5b06fbf61" title="QK idle callback (customized in BSPs for QK)">QK_onIdle()</a>, which in contrast to <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a> is invoked with interrupts unlocked.</li>
<li>in file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> removed QK_schedLock()/QK_schedUnlock() and replaced them with <a class="el" href="qk_8h.html#a02a27011a5aa955b140cd749b64b16e2" title="QK priority-ceiling mutex lock.">QK_mutexLock()</a>/QK_mutexUnlock(), with the semantics of returning the mutex.</li>
<li>in file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> changed the definitions of macros #QF_SCHED_LOCK/ #QF_SCHED_UNLOCK to use the new QK mutex API.</li>
<li>In file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> used the macro Q_ROM to allocate constant objects to ROM (/sa <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a>).</li>
<li>in file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> added the typedef for QMutex.</li>
<li>in file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> replaced the callback <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a> with the new one <a class="el" href="qk_8h.html#a667daad24b172e782fe4e2b5b06fbf61" title="QK idle callback (customized in BSPs for QK)">QK_onIdle()</a>.</li>
<li>removed source file qk_lock.c</li>
<li>added source file <a class="el" href="qk__mutex_8c.html" title="QK_mutexLock()/QK_mutexUnlock() implementation.">qk_mutex.c</a></li>
<li>in file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> changed the version number to 3.2.00</li>
<li>Updated "QK/C Programmer's Manual"</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> replaced QS_QK_SCHED_LOCK/UNLOCK with QS_QK_MUTEX_LOCK/UNLOCK. Also, changed data accompanying the trace records QS_QK_MUTEX_LOCK/UNLOCK.</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> used the macro Q_ROM to allocate constant objects to ROM (/sa <a class="el" href="qep_8h.html" title="Public QEP/C interface.">qep.h</a>).</li>
<li>in file <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a> changed the version number to 3.2.00</li>
<li>Updated "QS/C Programmer's Manual" in PDF.</li>
</ol>
<h2><a class="anchor" id="qpc_3_1_06"></a>
Version 3.1.06 (Product)</h2>
<p>Release date: Jul 14, 2006</p>
<ol type="1">
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> added function <a class="el" href="qf_8h.html#adf9cb86740bf55c5ad55c1d44fd35921" title="Function invoked by the application layer to stop the QF application and return control to the OS/Ker...">QF_stop()</a> to be called from the application code to stop the framework.</li>
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> added callback function QF_cleanup() to be called from the QF port to cleanup before exiting to the OS.</li>
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> deprecated the function QF_exit().</li>
<li>In file <a class="el" href="qk__sched_8c.html" title="QK_sched_() implementation.">qk_sched.c</a> removed unlocking of interrupts upon exit from QK_schedule_(). Now QK_schedule_() enters and exits with interrupts LOCKED.</li>
<li>In file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> modified macro QACTIVE_OSOBJECT_SIGNAL_() to always unlock the interrupts, regardless if QK_schedule_() has been called or not.</li>
<li>In file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> added unlocking interrupts after the call to QK_SCHEDULE_() in the function <a class="el" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a>.</li>
<li>In file qk_lock.c modified the function QK_schedUnlock() to always unlock the interrupts upon exit.</li>
<li>Updated licensing information.</li>
<li>Updated "QS Programmer's Manual" in PDF.</li>
</ol>
<h2><a class="anchor" id="qpc_3_1_05"></a>
Version 3.1.05 (Product)</h2>
<p>Release date: Feb 08, 2006</p>
<ol type="1">
<li>In file <a class="el" href="qf__act_8c.html" title="QF_active_[], QF_getVersion(), and QF_add_()/QF_remove_() implementation.">qf_act.c</a> added the Revision History Doxygen comment, which was previously in doxygen/qp.h</li>
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> augmented comment for <a class="el" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a> to cover the case when QF is used with QK.</li>
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> added the extern declarations of ::QF_tickCtr_, ::QF_intLockNest, and ::QF_isrNest_, which were previously declared in <a class="el" href="qf__pkg_8h.html" title="Internal (package scope) QF/C interface.">qf_pkg.h</a>.</li>
<li>In file <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a> added macros #QF_QS_INT_LOCK, #QF_QS_INT_UNLOCK(), <a class="el" href="qs_8h.html#a3a8b51b47686825984c8a7c1eff990ac" title="Output the interrupt entry record.">QF_QS_ISR_ENTRY</a>, and <a class="el" href="qs_8h.html#ad212a914d996105955eac8d053183900" title="Output the interrupt exit record.">QF_QS_ISR_EXIT</a>, which were previously declared in <a class="el" href="qs__port_8h.html" title="QS/C port to QS for a &quot;generic&quot; C compiler.">qs_port.h</a>.</li>
<li>In file ports/linux/gcc/qf_port.h added extern uint8_t QF_running_.</li>
<li>In file qf/80x86/dos/tcpp101/l/qf_port.c replaced deprecated QPSet_hasElements() to QPSet_isEmpty().</li>
<li>In file qf/80x86/linux/gcc/qf_port.c added <a class="el" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a></li>
<li>In file <a class="el" href="qeq__init_8c.html" title="QEQueue_init() definition. This function is used both for Active Object queues and for the &quot;raw&quot; thre...">qeq_init.c</a>:186 changed <a class="el" href="qs_8h.html#a1b8d4d79089735ec19915ef7ed3e2e0b" title="Output formatted object pointer to the QS record.">QS_OBJ(me)</a> to <a class="el" href="qs_8h.html#a1b8d4d79089735ec19915ef7ed3e2e0b" title="Output formatted object pointer to the QS record.">QS_OBJ(qSto)</a> to consistently refer to a queue by the ring buffer object</li>
<li>In file <a class="el" href="qf__pkg_8h.html" title="Internal (package scope) QF/C interface.">qf_pkg.h</a> removed extern ::QF_tickCtr_.</li>
<li>In file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> removed extern QK_intLockNest_ and QK_isrNest_. These counters have been moved to QF and renamed in the process to QF_intLockNest_ and QF_isrNest_, respectively.</li>
<li>In file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> added QS instrumentatin to #QF_INT_LOCK and #QF_INT_UNLOCK macros for tracing interrupt locking/unlocking. The QS interrupt locking/ unlocking instrumentation has been previously added at the QK port level.</li>
<li>In file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> removed macros QK_QS_INT_LOCK()/ QK_QS_INT_UNLOCK(), QK_QS_ISR_ENTRY()/ QK_QS_ISR_EXIT(). These macros have been moved to QF and renamed in the process to QF_QS_INT_LOCK()/ QF_QS_INT_UNLOCK(), <a class="el" href="qs_8h.html#a3a8b51b47686825984c8a7c1eff990ac" title="Output the interrupt entry record.">QF_QS_ISR_ENTRY()</a>/ <a class="el" href="qs_8h.html#ad212a914d996105955eac8d053183900" title="Output the interrupt exit record.">QF_QS_ISR_EXIT()</a>, respectively.</li>
<li>In file ports/80x86/qk/tcpp101/l/qk_port.h simplified the definition of the macros #QK_INT_LOCK/ #QK_INT_UNLOCK to NOT contain the QS instrumenation.</li>
<li>In file ports/80x86/qk/tcpp101/l/qk_port.h changed the definitions of <a class="el" href="qk__port_8h.html#ad3a6c9c79a8f39f1299196922e3eb6b5" title="Define the ISR entry sequence, if the compiler supports writing interrupts in C.">QK_ISR_ENTRY</a> and <a class="el" href="qk__port_8h.html#a18f2cc4dd2d00e3d5efb593d0754a95b" title="Define the ISR exit sequence, if the compiler supports writing interrupts in C.">QK_ISR_EXIT</a> to use <a class="el" href="qs_8h.html#a3a8b51b47686825984c8a7c1eff990ac" title="Output the interrupt entry record.">QF_QS_ISR_ENTRY</a>/ <a class="el" href="qs_8h.html#ad212a914d996105955eac8d053183900" title="Output the interrupt exit record.">QF_QS_ISR_EXIT</a>.</li>
<li>In file <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> added the Revision History Doxygen comment</li>
<li>In file <a class="el" href="qk__pkg_8h.html" title="Internal (package scope) QK/C interface.">qk_pkg.h</a> changed the definition of internal QK macros #QK_INT_LOCK_/ #QK_INT_UNLOCK_ to use the QS-instrumented #QF_INT_LOCK/ #QF_INT_UNLOCK.</li>
<li>In file qk_lock.c corrected a comment</li>
<li>In file <a class="el" href="qk__sched_8c.html" title="QK_sched_() implementation.">qk_sched.c</a> corrected a comment</li>
<li>Provided "QS/C Programmer's Manual" in PDF.</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> changed around the pre-defined records. Added records: QS_QF_INT_LOCK, QS_QF_INT_UNLOCK, QS_QF_ISR_ENTRY, QS_QF_ISR_EXIT. Removed records QS_QK_INT_LOCK, QS_QK_INT_UNLOCK, QS_QK_ISR_ENTRY, QS_QK_ISR_EXIT.</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> renamed functions QS_filterIn()/ QS_filerOut() to <a class="el" href="qs_8h.html#a4d68eb9ce36910c00fcf2204503216f3" title="Turn the global Filter on for a given record type rec.">QS_filterOn()</a>/ QS_filerOff(). Correspondingly, changed macros QS_FILTER_IN(), QS_FILTER_OUT(), to <a class="el" href="qs_8h.html#ab1daab0f67adda321cd13b42c6042023" title="Global Filter ON for a given record type rec.">QS_FILTER_ON()</a>, <a class="el" href="qs_8h.html#ae3d7888f95ecf7b24005a618ebc0ef89" title="Global filter OFF for a given record type rec.">QS_FILTER_OFF()</a>.</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> changed the signature and semantics of <a class="el" href="qs_8h.html#ac67dd066a794e6a9716209cf5044f13a" title="Byte-oriented interface to the QS data buffer.">QS_getByte()</a> to return QS_EOD (End-Of-Data).</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> changed the signature of <a class="el" href="qs_8h.html#abdd0b3d3a99632e841975c6b1c54c806" title="Block-oriented interface to the QS data buffer.">QS_getBlock()</a> to take a pointer to uint16_t rather than uint32_t.</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> eliminated the callback QS_newRecord()</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> added new callback QS_flush()</li>
<li>In file <a class="el" href="qs_8h.html" title="QS/C platform-independent public interface.">qs.h</a> added application-level local filter object QS_apObj_. Consistently, added macro <a class="el" href="qs_8h.html#aa6a82e6fda0dd1bb27a1ea0ca485a8a1" title="Local Filter for a generic application object obj_.">QS_FILTER_AP_OBJ()</a> to set the new local filter. Consistently, added object argument to macros <a class="el" href="qs_8h.html#ad99a023424e53db53e3a0bd6befe3f8e" title="Begin a user QS record with entering cricital section.">QS_BEGIN()</a> and QS_BEGIN_NOLOCK().</li>
<li>In files <a class="el" href="qs_8c.html" title="QS internal variables definitions and core QS functions implementations.">qs.c</a>, <a class="el" href="qs___8c.html" title="QS functions for internal use inside QP components.">qs_.c</a>, <a class="el" href="qs__blk_8c.html" title="QS_getBlock() implementation.">qs_blk.c</a>, <a class="el" href="qs__byte_8c.html" title="QS_getByte() implementation.">qs_byte.c</a>, <a class="el" href="qs__pkg_8h.html" title="Internal (package scope) QS/C interface.">qs_pkg.h</a> renamed some variables and adjusted comments.</li>
<li>Ported the QSpy host applicatoin to Linux. Added TCP/IP input to QSpy. Added new options.</li>
<li>Added redesigned QS port to Linux with TCP/IP data link.</li>
</ol>
<h2><a class="anchor" id="qpc_3_1_04"></a>
Version 3.1.04 (Beta)</h2>
<p>Release date: Dec 08, 2005</p>
<ol type="1">
<li>In file <a class="el" href="qmpool_8h.html" title="platform-independent memory pool interface.">qmpool.h</a> changed the definition of the <a class="el" href="qmpool_8h.html#ac41e4f294d103c68521f9ad1f8e4e3b4" title="macro to override the default ::QMPoolSize size. Valid values 1, 2, or 4; default 2...">QF_MPOOL_SIZ_SIZE</a> macro to remove the dependency on the <a class="el" href="qf_8h.html#a1272d49c23ca5852a7a8e9603ba32d31" title="Default value of the macro configurable value in qf_port.h.">QF_EVENT_SIZ_SIZE</a>. Macro <a class="el" href="qf_8h.html#a1272d49c23ca5852a7a8e9603ba32d31" title="Default value of the macro configurable value in qf_port.h.">QF_EVENT_SIZ_SIZE</a> might not be defined by the time <a class="el" href="qmpool_8h.html" title="platform-independent memory pool interface.">qmpool.h</a> is included.</li>
<li>Added explicit definition of the configuration macro QF_EVENT_SIZ_SIZE to all <a class="el" href="qf__port_8h.html" title="QF port to QK for a &quot;generic&quot; C compiler.">qf_port.h</a> files.</li>
<li>Fixed a bug in function <a class="el" href="qmpool_8h.html#aa302b94344244dd5ec650e4a2dc8f11f" title="Initializes the native QF event pool.">QMPool_init()</a> (file <a class="el" href="qmp__init_8c.html" title="QMPool_init() implementation.">qmp_init.c</a>) by changing the type of variable n from uint8_t to QMPoolCtr. The uint8_t data type was failing for bigger block sizes.</li>
<li>Added the <a class="el" href="qf_8h.html#afcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF)">QF_onIdle()</a> callback to <a class="el" href="qf_8h.html" title="QF/C platform-independent public interface.">qf.h</a></li>
<li>Improved comments in <a class="el" href="qpset_8h.html" title="platform-independent priority sets of 8 or 64 elements.">qpset.h</a></li>
<li>Corrected dependencies in the Makefile for QDPP example (directory 80x86/dos/tcpp101/l and 80x86/dos/tcpp101/s)</li>
<li>Added Linux QF port to the standard QF/C distribution.</li>
<li>Released the "QF/C Programmer's Manual"</li>
<li>Released "QK/C Programmer's Manual" in PDF.</li>
<li>In file <a class="el" href="qk_8h.html" title="QK/C platform-independent public interface.">qk.h</a> removed callbacks <a class="el" href="qk_8h.html#ae1fa4705c311e29699a0164a20362bf1" title="QK initialization.">QK_init()</a>, QK_start(), QK_idle(), QK_exit(), because they duplicate the QF callbacks.</li>
<li>Modified <a class="el" href="qk_8c.html" title="QK_readySet_, QK_currPrio_, and QK_intNest_ definitions and QK_getVersion(), QF_init(), QF_run(), QF_stop(), QActive_start(), QActive_stop(), QK_schedPrio_() implementations.">qk.c</a> to define the following QF "callbacks": <a class="el" href="qf_8h.html#a43b0dc29cba67147b76838144a901c38" title="Returns the QF-port version.">QF_getPortVersion()</a>, <a class="el" href="qf_8h.html#a7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a>, <a class="el" href="qf_8h.html#a0123f02b4c1bcf7df2cc0b11dfce8b09" title="Starts execution of an active object and registers the object with the framework.">QActive_start()</a>, and QActive_stop_().</li>
<li>Added an argument to the signature of QK_schedLock() to allow selective QK scheduler locking up to the specified priority level.</li>
<li>Changed the implementation of QK_schedLock() in file qk_lock.c.</li>
<li>Eliminated the need for qf_port.c in the QF/C ports for QK.</li>
<li>Simplified elements that go into qk_port.c in the QK/C ports.</li>
<li>Added the ARM-Simulator port to the standard QK/C distribution.</li>
<li>Cleaned-up the 80x86 QK port.</li>
</ol>
<h2><a class="anchor" id="qpc_3_1_03"></a>
Version 3.1.03 (Beta)</h2>
<p>Release date: Nov 18, 2005</p>
<ol type="1">
<li>Added Doxygen documentation to the source code</li>
<li>Added running__ member to the <a class="el" href="struct_q_active.html" title="Active Object structure.">QActive</a> structure</li>
<li>Added QF_EVENT_SIZ_SIZE configuration macro and related data type QEventSize. Made the following changes to the signatures: void <a class="el" href="qf__pool_8c.html#a63817909aa88407fd7d6c1ff3706a249" title="Event pool initialization for dynamic allocation of events.">QF_poolInit(void *poolSto, uint32_t poolSize, QEventSize evtSize)</a>; <a class="el" href="struct_q_event.html" title="Event structure.">QEvent</a> *QF_new_(QEventSize evtSize, QSignal sig);</li>
<li>Changed the name of protected function from QF_new() to <a class="el" href="qf_8h.html#a2128fe3499dc6ed8100f5deed5a779a1" title="Internal QF implementation of the dynamic event allocator.">QF_new_()</a>.</li>
<li>Added the QK component (Beta)</li>
<li>Added Doxygen documentation to the source code</li>
</ol>
<h2><a class="anchor" id="qpc_3_1_02"></a>
Version 3.1.02 (Beta)</h2>
<p>Release date: Feb 08, 2006</p>
<ol type="1">
<li>In file <a class="el" href="qep_8c.html" title="QEP_reservedEvt_ definition and QEP_getVersion() implementation.">qep.c</a> added the Revision History Doxygen comment, which was previously in doxygen/qp.h</li>
<li>updated the QBomb example to use the key events described in the "QEP/C Programmer's Manual"</li>
<li>changed C++ comments to C-comments in main.c of the QHsmTst example</li>
</ol>
<h2><a class="anchor" id="qpc_3_1_01"></a>
Version 3.1.01 (Beta)</h2>
<p>Release date: Oct 18, 2005</p>
<ol type="1">
<li>Removed <a href="http://www.state-machine.com/products/">Quantum Spy</a> (QS) dependency from the examples</li>
</ol>
<h2><a class="anchor" id="qpc_3_1_00"></a>
Version 3.1.00 (Beta)</h2>
<p>Release date: Oct 03, 2005</p>
<ol type="1">
<li>Applied new directory structure desribed in <a href="http://www.state-machine.com/doc/AN_QP_Directory_Structure.pdf">Application Note: QP Directory Structure</a> -# Added <a href="http://www.state-machine.com/products/">Quantum Spy</a> instrumentation. -# Removed file qfsm_tra.c. -# Introduced file <a class="el" href="qfsm__dis_8c.html" title="QFsm_dispatch() implementation.">qfsm_dis.c</a>. -# Applied new directory structure desribed in <a href="http://www.state-machine.com/doc/AN_QP_Directory_Structure.pdf">Application Note: QP Directory Structure</a> -# Added <a href="http://www.state-machine.com/products/">Quantum Spy</a> instrumentation.</li>
</ol>
<h2><a class="anchor" id="qpc_3_0_11"></a>
Version 3.0.11 (Beta)</h2>
<p>Release date: Aug 14, 2005</p>
<ol type="1">
<li>Fixed potential race condition for static transitions</li>
<li>Changed names of helper function QFsm_tran_()/QHsm_tran_() to QFsm_execTran()/QHsm_execTran() to match the QEP/C++ version.</li>
<li>Added assertion in QHsm_execTran() to catch potential path[] array overrun that previously could go undetected.</li>
</ol>
<h2><a class="anchor" id="qpc_3_0_10"></a>
Version 3.0.10 (Beta)</h2>
<p>Release date: Aug 06, 2005</p>
<p>This release contains completely redesigned Quantum Event Processor (QEP). The main focus is on compliance with standards (MISRA, Lint, Coding Standard), better portability, stack-use efficiency.</p>
<ol type="1">
<li>This release includes a comprehensive "QEP/C v3.0 Programmer's Manual" in PDF.</li>
<li>This release contains in-source comments for automatic generation of this Reference Manual with <a href="http://www.doxygen.org">doxygen</a>.</li>
<li>This release includes re-packaging the code into much larger number of modules (.c files) with typically one function per module. This fine-granularity packaging allows for better automatic elimination of unused code at link time and fine-tuning by applying different compiler options to different files.</li>
<li>This release is 98% compliant with the Motor Industry Software Reliability Association (MISRA) "Guidelines for the Use of the C Language in Vehicle Based
Software", April 1998, ISBN 0-9524156-9-0 (see also See also <a href="http://www.misra.org.uk">http://www.misra.org.uk</a>). A separate Application Note "QEP/C MISRA Compliance
Matrix" contains detailed account how QEP/C compiles with the 127 MISRA rules (See <a href="http://www.state-machine.com/doc/AN_QP_C_MISRA.pdf">http://www.state-machine.com/doc/AN_QP_C_MISRA.pdf</a>).</li>
<li>This release is now "lint-free". The source code has been thoroughly checked with the latest version of PC-lint(TM) (version 8.00q) from Gimpel Software (www.gimpel.com). The PC-lint configuration files and output files are included in the distribution. A separate Application Note "QEP/C PC-Lint Compliance" contains detailed account how QEP/C compiles with PC-Lint. (See <a href="http://www.state-machine.com/doc/AN_QP_C_PC-Lint.pdf">http://www.state-machine.com/doc/AN_QP_C_PC-Lint.pdf</a>).</li>
<li>This release is compliant with the "Quantum Leaps Coding C/C++ Standard" (<a href="http://www.state-machine.com/resources/QL_coding_standard.pdf">http://www.state-machine.com/resources/QL_coding_standard.pdf</a>). Among others, all public names are prefixed by "Q_", or "QEP_" to minimize compile-time and link-time name conflicts. In addition, QEP/C uses the C99 standard include file &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt; (C99 Standard, Section 7.18). Pre-standard compilers are still supported by placing &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt; in the compiler's header file directory.</li>
<li>The <a class="el" href="struct_q_event.html" title="Event structure.">QEvent</a> structure has been redesigned to use memory more efficiently. <a class="el" href="struct_q_event.html" title="Event structure.">QEvent</a> takes up only 2 bytes now.</li>
<li>The QHsm structure now derives from the <a class="el" href="struct_q_fsm.html" title="Finite State Machine.">QFsm</a> structure, which promotes better code re-use. In particular, macros Q_INIT() and <a class="el" href="qep_8h.html#a8f06cd90ba5060780fc61a4810e3eb50" title="Designates a target for an initial or regular transition. Q_TRAN() can be used both in the FSMs and H...">Q_TRAN()</a> are now common for both traditional non-hierarchical FSMs and for HSMs.</li>
<li>The <a class="el" href="struct_q_fsm.html" title="Finite State Machine.">QFsm</a> class has been redesigned to allow using entry and exit actions. Now the <a class="el" href="struct_q_fsm.html" title="Finite State Machine.">QFsm</a> class strictly avoids recursion, just as QHsm does (MISRA rule 70).</li>
<li>The QPseudoState type has been eliminated and replaced by QState.</li>
<li>The central QHsm class in QEP has been completely redesigned. The basic transition algorithm is essentially the same as described in "PSiCC", however the implementation is very different. The redesign was necessary to comply with the MISRA rules and to eliminate Lint warnings.</li>
<li>The event processor is now strictly non-recursive (MISRA rule 70), that is, event handlers never call themselves, even indirectly. (Previous algorithm required one-level of indirect recursion.)</li>
<li>Dynamic state transition is now default. Static transition optimization is still supported, but considered optional for performance tuning.</li>
<li>The artificial limitation of initial transitions targeting only immediate substate of a composite state has been removed (see "PSiCC" Figure 5.4[a]). Initial transitions can now target any substate, arbitrarily nested within the composite state.</li>
<li>This distribution uses the legacy Borland Turbo C++ 1.01 as the default compiler. Port to DOS with Turbo C++ 1.01 is provided along with GNU-compatible makefiles for the QEP library and sample applications. This compiler is not C99-compliant and does not provide the &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt; header file. However, the port of QEP includes a minimal &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt;, which should be placed into the INCLUDE directory of the Borland Turbo C++ 1.01 installation.</li>
<li>This distribution contains three sample applications: A simple time bomb (QBomb) to demonstrate use of <a class="el" href="struct_q_fsm.html" title="Finite State Machine.">QFsm</a>, a calculator (QCalc), and an exhaustive test of the QHsm class (QHsmTst). All examples are implemented as text-only application compiled with Turbo C++ 1.01. The QHsmTst sample application supports interactive and batch mode for exhaustive testing of the event processor. The source code for QHsmTst demonstrates also how QEP/C application code can be MISRA-compliant.</li>
<li>This distribution contains make files for the Turbo C++ 1.01 make utility, as well as GNU-compatible Makefiles. </li>
</ol>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 30 2012 22:21:52 for QP/C by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
