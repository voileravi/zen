<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>QP/C: qf_gc.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">QP/C
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">qf_gc.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc()</a> implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="qf__pkg_8h_source.html">qf_pkg.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="qassert_8h_source.html">qassert.h</a>&quot;</code><br/>
</div>
<p><a href="qf__gc_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qf__gc_8c.html#a40fe2f66781a8ac8170f0b188b879783">QF_gc</a> (<a class="el" href="struct_q_event.html">QEvent</a> const *e)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Recycle a dynamic event.  <a href="#a40fe2f66781a8ac8170f0b188b879783"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc()</a> implementation. </p>

<p>Definition in file <a class="el" href="qf__gc_8c_source.html">qf_gc.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a40fe2f66781a8ac8170f0b188b879783"></a><!-- doxytag: member="qf_gc.c::QF_gc" ref="a40fe2f66781a8ac8170f0b188b879783" args="(QEvent const *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="qf__gc_8c.html#a40fe2f66781a8ac8170f0b188b879783">QF_gc</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_event.html">QEvent</a> const *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Recycle a dynamic event. </p>
<p>This function implements a simple garbage collector for the dynamic events. Only dynamic events are candidates for recycling. (A dynamic event is one that is allocated from an event pool, which is determined as non-zero e-&gt;attrQF__ attribute.) Next, the function decrements the reference counter of the event, and recycles the event only if the counter drops to zero (meaning that no more references are outstanding for this event). The dynamic event is recycled by returning it to the pool from which it was originally allocated. The pool-of-origin information is stored in the upper 2-MSBs of the e-&gt;attrQF__ attribute.)</p>
<dl class="note"><dt><b>Note:</b></dt><dd>QF invokes the garbage collector at all appropriate contexts, when an event can become garbage (automatic garbage collection), so the application code should have no need to call <a class="el" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc()</a> directly. The <a class="el" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc()</a> function is exposed only for special cases when your application sends dynamic events to the "raw" thread-safe queues (see <a class="el" href="struct_q_e_queue.html" title="Native QF Event Queue.">QEQueue</a>). Such queues are processed outside of QF and the automatic garbage collection is CANNOT be performed for these events. In this case you need to call <a class="el" href="qf_8h.html#a40fe2f66781a8ac8170f0b188b879783" title="Recycle a dynamic event.">QF_gc()</a> explicitly. </dd></dl>

<p>Definition at line <a class="el" href="qf__gc_8c_source.html#l00040">40</a> of file <a class="el" href="qf__gc_8c_source.html">qf_gc.c</a>.</p>

<p>References <a class="el" href="qassert_8h_source.html#l00108">Q_ASSERT</a>, <a class="el" href="qk_8h_source.html#l00204">QF_EPOOL_PUT_</a>, <a class="el" href="qf__pkg_8h_source.html#l00097">QF_EVT_POOL_ID_</a>, <a class="el" href="qf__pkg_8h_source.html#l00100">QF_EVT_REF_CTR_</a>, <a class="el" href="qf__pkg_8h_source.html#l00106">QF_EVT_REF_CTR_DEC_</a>, <a class="el" href="qf__pool_8c_source.html#l00041">QF_maxPool_</a>, <a class="el" href="qf__pool_8c_source.html#l00040">QF_pool_</a>, <a class="el" href="qs_8h_source.html#l00736">QS_BEGIN_NOCRIT_</a>, <a class="el" href="qs_8h_source.html#l00748">QS_END_NOCRIT_</a>, <a class="el" href="qs_8h_source.html#l00086">QS_QF_GC</a>, <a class="el" href="qs_8h_source.html#l00085">QS_QF_GC_ATTEMPT</a>, <a class="el" href="qs_8h_source.html#l00175">QS_TIME_</a>, and <a class="el" href="qs_8h_source.html#l00753">QS_U8_</a>.</p>

<p>Referenced by <a class="el" href="qf__pspub_8c_source.html#l00043">QF_publish()</a>, <a class="el" href="qvanilla_8c_source.html#l00057">QF_run()</a>, <a class="el" href="qk__sched_8c_source.html#l00041">QK_sched_()</a>, and <a class="el" href="qk__ext_8c_source.html#l00041">QK_schedExt_()</a>.</p>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 30 2012 22:21:51 for QP/C by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
